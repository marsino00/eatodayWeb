1684721998
waR3U4bTeM%3Ac6f6b9fee226e656cead08cdaa341738-85c63b4ff1cb4ddadbed019c4f3b7770
s:79488:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6Ijg1YzYzYjRmZjFjYjRkZGFkYmVkMDE5YzRmM2I3NzcwIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTI6IkJsb2NrVGFnLnBocCI7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBwYXRoIjtzOjM3OiJ2ZW5kb3IvbXBkZi9tcGRmL3NyYy9UYWcvQmxvY2tUYWcucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czo1MjIxMDoiPD9waHAKCm5hbWVzcGFjZSBNcGRmXFRhZzsKCnVzZSBNcGRmXENvbnZlcnNpb25cRGVjVG9BbHBoYTsKdXNlIE1wZGZcQ29udmVyc2lvblxEZWNUb1JvbWFuOwp1c2UgTXBkZlxVdGlsc1xBcnJheXM7CnVzZSBNcGRmXFV0aWxzXFV0ZlN0cmluZzsKCmFic3RyYWN0IGNsYXNzIEJsb2NrVGFnIGV4dGVuZHMgVGFnCnsKCglwdWJsaWMgZnVuY3Rpb24gb3BlbigkYXR0ciwgJiRhaHRtbCwgJiRpaHRtbCkKCXsKCQkkdGFnID0gJHRoaXMtPmdldFRhZ05hbWUoKTsKCgkJLy8gbVBERiA2ICBMaXN0cwoJCSR0aGlzLT5tcGRmLT5sYXN0b3B0aW9uYWx0YWcgPSAnJzsKCgkJLy8gbVBERiA2IGJpZGkKCQkvLyBCbG9jawoJCS8vIElmIHVuaWNvZGUtYmlkaSBzZXQgb24gY3VycmVudCBjbG9jaywgYW55IGVtYmVkZGluZyBsZXZlbHMsIGlzb2xhdGVzLCBvciBvdmVycmlkZXMgYXJlIGNsb3NlZCAobm90IGluaGVyaXRlZCkKCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnYmlkaWNvZGUnXSkpIHsKCQkJJGJsb2NrcG9zdCA9ICR0aGlzLT5tcGRmLT5fc2V0QmlkaUNvZGVzKCdlbmQnLCAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydiaWRpY29kZSddKTsKCQkJaWYgKCRibG9ja3Bvc3QpIHsKCQkJCSR0aGlzLT5tcGRmLT5PVExkYXRhID0gW107CgkJCQlpZiAoJHRoaXMtPm1wZGYtPnRhYmxlTGV2ZWwpIHsKCQkJCQkkdGhpcy0+bXBkZi0+X3NhdmVDZWxsVGV4dEJ1ZmZlcigkYmxvY2twb3N0KTsKCQkJCX0gZWxzZSB7CgkJCQkJJHRoaXMtPm1wZGYtPl9zYXZlVGV4dEJ1ZmZlcigkYmxvY2twb3N0KTsKCQkJCX0KCQkJfQoJCX0KCgoJCSRwID0gJHRoaXMtPmNzc01hbmFnZXItPlByZXZpZXdCbG9ja0NTUygkdGFnLCAkYXR0cik7CgkJaWYgKGlzc2V0KCRwWydESVNQTEFZJ10pICYmIHN0cnRvbG93ZXIoJHBbJ0RJU1BMQVknXSkgPT09ICdub25lJykgewoJCQkkdGhpcy0+bXBkZi0+YmxrbHZsKys7CgkJCSR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ2hpZGUnXSA9IHRydWU7CgkJCSR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ3RhZyddID0gJHRhZzsgIC8vIG1QREYgNgoJCQlyZXR1cm47CgkJfQoJCWlmICgkdGFnID09PSAnQ0FQVElPTicpIHsKCQkJLy8gcG9zaXRpb24gaXMgd3JpdHRlbiBpbiBBZGpzdEhUTUwKCQkJJGRpdnBvcyA9ICdUJzsKCQkJaWYgKGlzc2V0KCRhdHRyWydQT1NJVElPTiddKSAmJiBzdHJ0b2xvd2VyKCRhdHRyWydQT1NJVElPTiddKSA9PT0gJ2JvdHRvbScpIHsKCQkJCSRkaXZwb3MgPSAnQic7CgkJCX0KCgkJCSRjYXBwb3MgPSAnVCc7CgkJCWlmIChpc3NldCgkYXR0clsnQUxJR04nXSkgJiYgc3RydG9sb3dlcigkYXR0clsnQUxJR04nXSkgPT09ICdib3R0b20nKSB7CgkJCQkkY2FwcG9zID0gJ0InOwoJCQl9IGVsc2VpZiAoaXNzZXQoJHBbJ0NBUFRJT04tU0lERSddKSAmJiBzdHJ0b2xvd2VyKCRwWydDQVBUSU9OLVNJREUnXSkgPT09ICdib3R0b20nKSB7CgkJCQkkY2FwcG9zID0gJ0InOwoJCQl9CgkJCWlmIChpc3NldCgkYXR0clsnQUxJR04nXSkpIHsKCQkJCXVuc2V0KCRhdHRyWydBTElHTiddKTsKCQkJfQoJCQlpZiAoJGNhcHBvcyAhPSAkZGl2cG9zKSB7CgkJCQkkdGhpcy0+bXBkZi0+YmxrbHZsKys7CgkJCQkkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydoaWRlJ10gPSB0cnVlOwoJCQkJJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsndGFnJ10gPSAkdGFnOyAgLy8gbVBERiA2CgkJCQlyZXR1cm47CgkJCX0KCQl9CgoJCS8qIC0tIEZPUk1TIC0tICovCgkJaWYgKCR0YWcgPT09ICdGT1JNJykgewoJCQkkdGhpcy0+Zm9ybS0+Zm9ybU1ldGhvZCA9ICdQT1NUJzsKCQkJaWYgKGlzc2V0KCRhdHRyWydNRVRIT0QnXSkgJiYgc3RydG9sb3dlcigkYXR0clsnTUVUSE9EJ10pID09PSAnZ2V0JykgewoJCQkJJHRoaXMtPmZvcm0tPmZvcm1NZXRob2QgPSAnR0VUJzsKCQkJfQoKCQkJJHRoaXMtPmZvcm0tPmZvcm1BY3Rpb24gPSAnJzsKCQkJaWYgKGlzc2V0KCRhdHRyWydBQ1RJT04nXSkpIHsKCQkJCSR0aGlzLT5mb3JtLT5mb3JtQWN0aW9uID0gJGF0dHJbJ0FDVElPTiddOwoJCQl9CgkJfQoJCS8qIC0tIEVORCBGT1JNUyAtLSAqLwoKCgkJLyogLS0gQ1NTLVBPU0lUSU9OIC0tICovCgkJaWYgKChpc3NldCgkcFsnUE9TSVRJT04nXSkKCQkJCSYmIChzdHJ0b2xvd2VyKCRwWydQT1NJVElPTiddKSA9PT0gJ2ZpeGVkJwoJCQkJCXx8IHN0cnRvbG93ZXIoJHBbJ1BPU0lUSU9OJ10pID09PSAnYWJzb2x1dGUnKSkKCQkJJiYgJHRoaXMtPm1wZGYtPmJsa2x2bCA9PSAwKSB7CgkJCWlmICgkdGhpcy0+bXBkZi0+aW5GaXhlZFBvc0Jsb2NrKSB7CgkJCQl0aHJvdyBuZXcgXE1wZGZcTXBkZkV4Y2VwdGlvbignQ2Fubm90IG5lc3QgYmxvY2sgd2l0aCBwb3NpdGlvbjpmaXhlZCBvciBwb3NpdGlvbjphYnNvbHV0ZScpOwoJCQl9CgkJCSR0aGlzLT5tcGRmLT5pbkZpeGVkUG9zQmxvY2sgPSB0cnVlOwoJCQlyZXR1cm47CgkJfQoJCS8qIC0tIEVORCBDU1MtUE9TSVRJT04gLS0gKi8KCQkvLyBTdGFydCBCbG9jawoJCSR0aGlzLT5tcGRmLT5pZ25vcmVmb2xsb3dpbmdzcGFjZXMgPSB0cnVlOwoKCQkkbGFzdGJvdHRvbW1hcmdpbiA9IDA7CgkJaWYgKCR0aGlzLT5tcGRmLT5ibG9ja2p1c3RmaW5pc2hlZCAmJiAhY291bnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIpCgkJCSYmICR0aGlzLT5tcGRmLT55ICE9ICR0aGlzLT5tcGRmLT50TWFyZ2luCgkJCSYmICR0aGlzLT5tcGRmLT5jb2xsYXBzZUJsb2NrTWFyZ2lucykgewoJCQkkbGFzdGJvdHRvbW1hcmdpbiA9ICR0aGlzLT5tcGRmLT5sYXN0YmxvY2tib3R0b21tYXJnaW47CgkJfQoJCSR0aGlzLT5tcGRmLT5sYXN0YmxvY2tib3R0b21tYXJnaW4gPSAwOwoJCSR0aGlzLT5tcGRmLT5ibG9ja2p1c3RmaW5pc2hlZCA9IGZhbHNlOwoKCgkJJHRoaXMtPm1wZGYtPklubGluZUJERiA9IFtdOyAvLyBtUERGIDYKCQkkdGhpcy0+bXBkZi0+SW5saW5lQkRGY3RyID0gMDsgLy8gbVBERiA2CgkJJHRoaXMtPm1wZGYtPklubGluZVByb3BlcnRpZXMgPSBbXTsKCQkkdGhpcy0+bXBkZi0+ZGl2YmVnaW4gPSB0cnVlOwoKCQkkdGhpcy0+bXBkZi0+bGluZWJyZWFranVzdGZpbmlzaGVkID0gZmFsc2U7CgoJCS8qIC0tIFRBQkxFUyAtLSAqLwoJCWlmICgkdGhpcy0+bXBkZi0+dGFibGVMZXZlbCkgewoJCQkvLyBJZiBhbHJlYWR5IHNvbWV0aGluZyBvbiB0aGUgbGluZQoJCQlpZiAoJHRoaXMtPm1wZGYtPmNlbGxbJHRoaXMtPm1wZGYtPnJvd11bJHRoaXMtPm1wZGYtPmNvbF1bJ3MnXSA+IDAgJiYgISR0aGlzLT5tcGRmLT5uZXN0ZWR0YWJsZWp1c3RmaW5pc2hlZCkgewoJCQkJJHRoaXMtPm1wZGYtPl9zYXZlQ2VsbFRleHRCdWZmZXIoIlxuIik7CgkJCQlpZiAoIWlzc2V0KCR0aGlzLT5tcGRmLT5jZWxsWyR0aGlzLT5tcGRmLT5yb3ddWyR0aGlzLT5tcGRmLT5jb2xdWydtYXhzJ10pKSB7CgkJCQkJJHRoaXMtPm1wZGYtPmNlbGxbJHRoaXMtPm1wZGYtPnJvd11bJHRoaXMtPm1wZGYtPmNvbF1bJ21heHMnXSA9ICR0aGlzLT5tcGRmLT5jZWxsWyR0aGlzLT5tcGRmLT5yb3ddWyR0aGlzLT5tcGRmLT5jb2xdWydzJ107CgkJCQl9IGVsc2VpZiAoJHRoaXMtPm1wZGYtPmNlbGxbJHRoaXMtPm1wZGYtPnJvd11bJHRoaXMtPm1wZGYtPmNvbF1bJ21heHMnXSA8ICR0aGlzLT5tcGRmLT5jZWxsWyR0aGlzLT5tcGRmLT5yb3ddWyR0aGlzLT5tcGRmLT5jb2xdWydzJ10pIHsKCQkJCQkkdGhpcy0+bXBkZi0+Y2VsbFskdGhpcy0+bXBkZi0+cm93XVskdGhpcy0+bXBkZi0+Y29sXVsnbWF4cyddID0gJHRoaXMtPm1wZGYtPmNlbGxbJHRoaXMtPm1wZGYtPnJvd11bJHRoaXMtPm1wZGYtPmNvbF1bJ3MnXTsKCQkJCX0KCQkJCSR0aGlzLT5tcGRmLT5jZWxsWyR0aGlzLT5tcGRmLT5yb3ddWyR0aGlzLT5tcGRmLT5jb2xdWydzJ10gPSAwOyAvLyByZXNldAoJCQl9CgkJCS8vIENhbm5vdCBzZXQgYmxvY2sgcHJvcGVydGllcyBpbnNpZGUgdGFibGUgLSB1c2UgQm9sZCB0byBpbmRpY2F0ZSBoMS1oNgoJCQlpZiAoJHRhZyA9PT0gJ0NFTlRFUicgJiYgJHRoaXMtPm1wZGYtPnRkYmVnaW4pIHsKCQkJCSR0aGlzLT5tcGRmLT5jZWxsWyR0aGlzLT5tcGRmLT5yb3ddWyR0aGlzLT5tcGRmLT5jb2xdWydhJ10gPSAkdGhpcy0+Z2V0QWxpZ24oJ2NlbnRlcicpOwoJCQl9CgoJCQkkdGhpcy0+bXBkZi0+SW5saW5lUHJvcGVydGllc1snQkxPQ0tJTlRBQkxFJ10gPSAkdGhpcy0+bXBkZi0+c2F2ZUlubGluZVByb3BlcnRpZXMoKTsKCQkJJHByb3BlcnRpZXMgPSAkdGhpcy0+Y3NzTWFuYWdlci0+TWVyZ2VDU1MoJycsICR0YWcsICRhdHRyKTsKCQkJaWYgKCFlbXB0eSgkcHJvcGVydGllcykpIHsKCQkJCSR0aGlzLT5tcGRmLT5zZXRDU1MoJHByb3BlcnRpZXMsICdJTkxJTkUnKTsKCQkJfQoKCQkJLy8gbVBERiA2ICBMaXN0cwoJCQlpZiAoJHRhZyA9PT0gJ1VMJyB8fCAkdGFnID09PSAnT0wnKSB7CgkJCQkkdGhpcy0+bXBkZi0+bGlzdGx2bCsrOwoJCQkJaWYgKGlzc2V0KCRhdHRyWydTVEFSVCddKSkgewoJCQkJCSR0aGlzLT5tcGRmLT5saXN0Y291bnRlclskdGhpcy0+bXBkZi0+bGlzdGx2bF0gPSAoaW50KSAkYXR0clsnU1RBUlQnXSAtIDE7CgkJCQl9IGVsc2UgewoJCQkJCSR0aGlzLT5tcGRmLT5saXN0Y291bnRlclskdGhpcy0+bXBkZi0+bGlzdGx2bF0gPSAwOwoJCQkJfQoJCQkJJHRoaXMtPm1wZGYtPmxpc3RpdGVtID0gW107CgkJCQlpZiAoJHRhZyA9PT0gJ09MJykgewoJCQkJCSR0aGlzLT5tcGRmLT5saXN0dHlwZVskdGhpcy0+bXBkZi0+bGlzdGx2bF0gPSAnZGVjaW1hbCc7CgkJCQl9IGVsc2VpZiAoJHRhZyA9PT0gJ1VMJykgewoJCQkJCWlmICgkdGhpcy0+bXBkZi0+bGlzdGx2bCAlIDMgPT0gMSkgewoJCQkJCQkkdGhpcy0+bXBkZi0+bGlzdHR5cGVbJHRoaXMtPm1wZGYtPmxpc3RsdmxdID0gJ2Rpc2MnOwoJCQkJCX0gZWxzZWlmICgkdGhpcy0+bXBkZi0+bGlzdGx2bCAlIDMgPT0gMikgewoJCQkJCQkkdGhpcy0+bXBkZi0+bGlzdHR5cGVbJHRoaXMtPm1wZGYtPmxpc3RsdmxdID0gJ2NpcmNsZSc7CgkJCQkJfSBlbHNlIHsKCQkJCQkJJHRoaXMtPm1wZGYtPmxpc3R0eXBlWyR0aGlzLT5tcGRmLT5saXN0bHZsXSA9ICdzcXVhcmUnOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gbVBERiA2ICBMaXN0cyAtIGluIFRhYmxlcwoJCQlpZiAoJHRhZyA9PT0gJ0xJJykgewoKCQkJCWlmICgkdGhpcy0+bXBkZi0+bGlzdGx2bCA9PSAwKSB7IC8vaW4gY2FzZSBvZiBtYWxmb3JtZWQgSFRNTCBjb2RlLiBFeGFtcGxlOiguLi4pPC9wPjxsaT5Db250ZW50PC9saT48cD5QYXJhZ3JhcGgxPC9wPiguLi4pCgkJCQkJJHRoaXMtPm1wZGYtPmxpc3RsdmwrKzsgLy8gZmlyc3QgZGVwdGggbGV2ZWwKCQkJCQkkdGhpcy0+bXBkZi0+bGlzdGNvdW50ZXJbJHRoaXMtPm1wZGYtPmxpc3RsdmxdID0gMDsKCQkJCX0KCgkJCQkkdGhpcy0+bXBkZi0+bGlzdGNvdW50ZXJbJHRoaXMtPm1wZGYtPmxpc3RsdmxdKys7CgkJCQkkdGhpcy0+bXBkZi0+bGlzdGl0ZW0gPSBbXTsKCQkJCS8vaWYgaW4gdGFibGUgLSBvdXRwdXQgaGVyZSBhcyBhIHRhYmxldGV4dGJ1ZmZlcgoJCQkJLy9wb3NpdGlvbjppbnNpZGUgT1IgcG9zaXRpb246b3V0c2lkZSAoYWx3YXlzIG91dHB1dCBpbiB0YWJsZSBhcyBwb3NpdGlvbjppbnNpZGUpCgoJCQkJJGRlY1RvQWxwaGEgPSBuZXcgRGVjVG9BbHBoYSgpOwoJCQkJJGRlY1RvUm9tYW4gPSBuZXcgRGVjVG9Sb21hbigpOwoKCQkJCXN3aXRjaCAoJHRoaXMtPm1wZGYtPmxpc3R0eXBlWyR0aGlzLT5tcGRmLT5saXN0bHZsXSkgewoJCQkJCWNhc2UgJ3VwcGVyLWFscGhhJzoKCQkJCQljYXNlICd1cHBlci1sYXRpbic6CgkJCQkJY2FzZSAnQSc6CgkJCQkJCSRibHQgPSAkZGVjVG9BbHBoYS0+Y29udmVydCgkdGhpcy0+bXBkZi0+bGlzdGNvdW50ZXJbJHRoaXMtPm1wZGYtPmxpc3RsdmxdKSAuICR0aGlzLT5tcGRmLT5saXN0X251bWJlcl9zdWZmaXg7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ2xvd2VyLWFscGhhJzoKCQkJCQljYXNlICdsb3dlci1sYXRpbic6CgkJCQkJY2FzZSAnYSc6CgkJCQkJCSRibHQgPSAkZGVjVG9BbHBoYS0+Y29udmVydCgkdGhpcy0+bXBkZi0+bGlzdGNvdW50ZXJbJHRoaXMtPm1wZGYtPmxpc3RsdmxdLCBmYWxzZSkgLiAkdGhpcy0+bXBkZi0+bGlzdF9udW1iZXJfc3VmZml4OwoJCQkJCQlicmVhazsKCQkJCQljYXNlICd1cHBlci1yb21hbic6CgkJCQkJY2FzZSAnSSc6CgkJCQkJCSRibHQgPSAkZGVjVG9Sb21hbi0+Y29udmVydCgkdGhpcy0+bXBkZi0+bGlzdGNvdW50ZXJbJHRoaXMtPm1wZGYtPmxpc3RsdmxdKSAuICR0aGlzLT5tcGRmLT5saXN0X251bWJlcl9zdWZmaXg7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ2xvd2VyLXJvbWFuJzoKCQkJCQljYXNlICdpJzoKCQkJCQkJJGJsdCA9ICRkZWNUb1JvbWFuLT5jb252ZXJ0KCR0aGlzLT5tcGRmLT5saXN0Y291bnRlclskdGhpcy0+bXBkZi0+bGlzdGx2bF0pIC4gJHRoaXMtPm1wZGYtPmxpc3RfbnVtYmVyX3N1ZmZpeDsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAnZGVjaW1hbCc6CgkJCQkJY2FzZSAnMSc6CgkJCQkJCSRibHQgPSAkdGhpcy0+bXBkZi0+bGlzdGNvdW50ZXJbJHRoaXMtPm1wZGYtPmxpc3RsdmxdIC4gJHRoaXMtPm1wZGYtPmxpc3RfbnVtYmVyX3N1ZmZpeDsKCQkJCQkJYnJlYWs7CgkJCQkJZGVmYXVsdDoKCQkJCQkJJGJsdCA9ICctJzsKCQkJCQkJaWYgKCR0aGlzLT5tcGRmLT5saXN0bHZsICUgMyA9PSAxICYmICR0aGlzLT5tcGRmLT5fY2hhckRlZmluZWQoJHRoaXMtPm1wZGYtPkN1cnJlbnRGb250WydjdyddLCA4MjI2KSkgewoJCQkJCQkJJGJsdCA9ICJceGUyXHg4MFx4YTIiOwoJCQkJCQl9IC8vICYjODIyNjsKCQkJCQkJZWxzZWlmICgkdGhpcy0+bXBkZi0+bGlzdGx2bCAlIDMgPT0gMiAmJiAkdGhpcy0+bXBkZi0+X2NoYXJEZWZpbmVkKCR0aGlzLT5tcGRmLT5DdXJyZW50Rm9udFsnY3cnXSwgOTkwMCkpIHsKCQkJCQkJCSRibHQgPSAiXHhlMlx4OWFceGFjIjsKCQkJCQkJfSAvLyAmIzk5MDA7CgkJCQkJCWVsc2VpZiAoJHRoaXMtPm1wZGYtPmxpc3RsdmwgJSAzID09IDAgJiYgJHRoaXMtPm1wZGYtPl9jaGFyRGVmaW5lZCgkdGhpcy0+bXBkZi0+Q3VycmVudEZvbnRbJ2N3J10sIDk2NDIpKSB7CgkJCQkJCQkkYmx0ID0gIlx4ZTJceDk2XHhhYSI7CgkJCQkJCX0gLy8gJiM5NjQyOwoJCQkJCQlicmVhazsKCQkJCX0KCgkJCQkvLyBjaGFuZ2UgdG8gJm5ic3A7IHNwYWNlcwoJCQkJaWYgKCR0aGlzLT5tcGRmLT51c2luZ0NvcmVGb250KSB7CgkJCQkJJGxzID0gc3RyX3JlcGVhdChjaHIoMTYwKSAuIGNocigxNjApLCAoJHRoaXMtPm1wZGYtPmxpc3RsdmwgLSAxKSAqIDIpIC4gJGJsdCAuICcgJzsKCQkJCX0gZWxzZSB7CgkJCQkJJGxzID0gc3RyX3JlcGVhdCgiXHhjMlx4YTBceGMyXHhhMCIsICgkdGhpcy0+bXBkZi0+bGlzdGx2bCAtIDEpICogMikgLiAkYmx0IC4gJyAnOwoJCQkJfQoJCQkJJHRoaXMtPm1wZGYtPl9zYXZlQ2VsbFRleHRCdWZmZXIoJGxzKTsKCQkJCSR0aGlzLT5tcGRmLT5jZWxsWyR0aGlzLT5tcGRmLT5yb3ddWyR0aGlzLT5tcGRmLT5jb2xdWydzJ10gKz0gJHRoaXMtPm1wZGYtPkdldFN0cmluZ1dpZHRoKCRscyk7CgkJCX0KCgkJCXJldHVybjsKCQl9CgkJLyogLS0gRU5EIFRBQkxFUyAtLSAqLwoKCQlpZiAoJHRoaXMtPm1wZGYtPmxhc3RibG9ja2xldmVsY2hhbmdlID09IDEpIHsKCQkJJGJsb2Nrc3RhdGUgPSAxOwoJCX0gLy8gVG9wIG1hcmdpbnMvcGFkZGluZyBvbmx5CgkJZWxzZWlmICgkdGhpcy0+bXBkZi0+bGFzdGJsb2NrbGV2ZWxjaGFuZ2UgPCAxKSB7CgkJCSRibG9ja3N0YXRlID0gMDsKCQl9IC8vIE5PIG1hcmdpbnMvcGFkZGluZwoKCQkkdGhpcy0+bXBkZi0+cHJpbnRidWZmZXIoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIsICRibG9ja3N0YXRlKTsKCQkkdGhpcy0+bXBkZi0+dGV4dGJ1ZmZlciA9IFtdOwoKCQkkc2F2ZV9ibGtsdmwgPSAkdGhpcy0+bXBkZi0+YmxrbHZsOwoJCSRzYXZlX2JsayA9ICR0aGlzLT5tcGRmLT5ibGs7CgoJCSR0aGlzLT5tcGRmLT5SZXNldCgpOwoKCQkkcGFnZXNlbCA9ICcnOwoJCS8qIC0tIENTUy1QQUdFIC0tICovCgkJaWYgKGlzc2V0KCRwWydQQUdFJ10pKSB7CgkJCSRwYWdlc2VsID0gJHBbJ1BBR0UnXTsKCQl9ICAvLyBtUERGIDYgKHVzZXMgJHAgLSBwcmV2aWV3IG9mIHByb3BlcnRpZXMgc28gYmxrbHZsIGNhbiBiZSBpbmNyZW1lbnRlZCBhZnRlciBwYWdlLWJyZWFrKQoJCS8qIC0tIEVORCBDU1MtUEFHRSAtLSAqLwoKCQkvLyBJZiBwYWdlLWJveCBoYXMgY2hhbmdlZCBBTkQvT1IgUEFHRS1CUkVBSy1CRUZPUkUKCQkvLyBtUERGIDYgKHVzZXMgJHAgLSBwcmV2aWV3IG9mIHByb3BlcnRpZXMgc28gYmxrbHZsIGNhbiBiZSBpbWNyZW1lbnRlZCBhZnRlciBwYWdlLWJyZWFrKQoJCWlmICghJHRoaXMtPm1wZGYtPnRhYmxlTGV2ZWwgJiYgKCgkcGFnZXNlbCAmJiAoIWlzc2V0KCR0aGlzLT5tcGRmLT5wYWdlX2JveFsnY3VycmVudCddKQoJCQkJCQl8fCAkcGFnZXNlbCAhPSAkdGhpcy0+bXBkZi0+cGFnZV9ib3hbJ2N1cnJlbnQnXSkpCgkJCQl8fCAoaXNzZXQoJHBbJ1BBR0UtQlJFQUstQkVGT1JFJ10pCgkJCQkJJiYgJHBbJ1BBR0UtQlJFQUstQkVGT1JFJ10pKSkgewoJCQkvLyBtUERGIDYgcGFnZWJyZWFrdHlwZQoJCQkkc3RhcnRwYWdlID0gJHRoaXMtPm1wZGYtPnBhZ2U7CgkJCSRwYWdlYnJlYWt0eXBlID0gJHRoaXMtPm1wZGYtPmRlZmF1bHRQYWdlYnJlYWtUeXBlOwoJCQkkdGhpcy0+bXBkZi0+bGFzdGJsb2NrbGV2ZWxjaGFuZ2UgPSAtMTsKCQkJaWYgKCR0aGlzLT5tcGRmLT5Db2xBY3RpdmUpIHsKCQkJCSRwYWdlYnJlYWt0eXBlID0gJ2Nsb25lYWxsJzsKCQkJfQoJCQlpZiAoJHBhZ2VzZWwgJiYgKCFpc3NldCgkdGhpcy0+bXBkZi0+cGFnZV9ib3hbJ2N1cnJlbnQnXSkgfHwgJHBhZ2VzZWwgIT0gJHRoaXMtPm1wZGYtPnBhZ2VfYm94WydjdXJyZW50J10pKSB7CgkJCQkkcGFnZWJyZWFrdHlwZSA9ICdjbG9uZWFsbCc7CgkJCX0KCQkJJHRoaXMtPm1wZGYtPl9wcmVGb3JjZWRQYWdlYnJlYWsoJHBhZ2VicmVha3R5cGUpOwoKCQkJaWYgKGlzc2V0KCRwWydQQUdFLUJSRUFLLUJFRk9SRSddKSkgewoJCQkJaWYgKHN0cnRvdXBwZXIoJHBbJ1BBR0UtQlJFQUstQkVGT1JFJ10pID09PSAnUklHSFQnKSB7CgkJCQkJJHRoaXMtPm1wZGYtPkFkZFBhZ2UoCgkJCQkJCSR0aGlzLT5tcGRmLT5DdXJPcmllbnRhdGlvbiwKCQkJCQkJJ05FWFQtT0REJywKCQkJCQkJJycsCgkJCQkJCScnLAoJCQkJCQknJywKCQkJCQkJJycsCgkJCQkJCScnLAoJCQkJCQknJywKCQkJCQkJJycsCgkJCQkJCScnLAoJCQkJCQknJywKCQkJCQkJJycsCgkJCQkJCScnLAoJCQkJCQknJywKCQkJCQkJJycsCgkJCQkJCTAsCgkJCQkJCTAsCgkJCQkJCTAsCgkJCQkJCTAsCgkJCQkJCSRwYWdlc2VsCgkJCQkJKTsKCQkJCX0gZWxzZWlmIChzdHJ0b3VwcGVyKCRwWydQQUdFLUJSRUFLLUJFRk9SRSddKSA9PT0gJ0xFRlQnKSB7CgkJCQkJJHRoaXMtPm1wZGYtPkFkZFBhZ2UoCgkJCQkJCSR0aGlzLT5tcGRmLT5DdXJPcmllbnRhdGlvbiwKCQkJCQkJJ05FWFQtRVZFTicsCgkJCQkJCScnLAoJCQkJCQknJywKCQkJCQkJJycsCgkJCQkJCScnLAoJCQkJCQknJywKCQkJCQkJJycsCgkJCQkJCScnLAoJCQkJCQknJywKCQkJCQkJJycsCgkJCQkJCScnLAoJCQkJCQknJywKCQkJCQkJJycsCgkJCQkJCScnLAoJCQkJCQkwLAoJCQkJCQkwLAoJCQkJCQkwLAoJCQkJCQkwLAoJCQkJCQkkcGFnZXNlbAoJCQkJCSk7CgkJCQl9IGVsc2VpZiAoc3RydG91cHBlcigkcFsnUEFHRS1CUkVBSy1CRUZPUkUnXSkgPT09ICdBTFdBWVMnKSB7CgkJCQkJJHRoaXMtPm1wZGYtPkFkZFBhZ2UoJHRoaXMtPm1wZGYtPkN1ck9yaWVudGF0aW9uLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsIDAsIDAsIDAsIDAsICRwYWdlc2VsKTsKCQkJCX0gZWxzZWlmICgkdGhpcy0+bXBkZi0+cGFnZV9ib3hbJ2N1cnJlbnQnXSAhPSAkcGFnZXNlbCkgewoJCQkJCSR0aGlzLT5tcGRmLT5BZGRQYWdlKCR0aGlzLT5tcGRmLT5DdXJPcmllbnRhdGlvbiwgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAwLCAwLCAwLCAwLCAkcGFnZXNlbCk7CgkJCQl9IC8vICpDU1MtUEFHRSoKCQkJfSAvKiAtLSBDU1MtUEFHRSAtLSAqLwoJCQkvLyBNdXN0IEFkZCBuZXcgcGFnZSBpZiBjaGFuZ2VkIHBhZ2UgcHJvcGVydGllcwoJCQllbHNlaWYgKCFpc3NldCgkdGhpcy0+bXBkZi0+cGFnZV9ib3hbJ2N1cnJlbnQnXSkgfHwgJHBhZ2VzZWwgIT0gJHRoaXMtPm1wZGYtPnBhZ2VfYm94WydjdXJyZW50J10pIHsKCQkJCSR0aGlzLT5tcGRmLT5BZGRQYWdlKCR0aGlzLT5tcGRmLT5DdXJPcmllbnRhdGlvbiwgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAwLCAwLCAwLCAwLCAkcGFnZXNlbCk7CgkJCX0KCQkJLyogLS0gRU5EIENTUy1QQUdFIC0tICovCgoJCQkvLyBtUERGIDYgcGFnZWJyZWFrdHlwZQoJCQkkdGhpcy0+bXBkZi0+X3Bvc3RGb3JjZWRQYWdlYnJlYWsoJHBhZ2VicmVha3R5cGUsICRzdGFydHBhZ2UsICRzYXZlX2JsaywgJHNhdmVfYmxrbHZsKTsKCQl9CgoJCS8vIG1QREYgNiBwYWdlYnJlYWt0eXBlIC0gbW92ZWQgYWZ0ZXIgcGFnZWJyZWFrCgkJJHRoaXMtPm1wZGYtPmJsa2x2bCsrOwoJCSRjdXJyYmxrID0gJiAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdOwoJCSR0aGlzLT5tcGRmLT5pbml0aWFsaXNlQmxvY2soJGN1cnJibGspOwoJCSRwcmV2YmxrID0gJiAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmwgLSAxXTsKCQkkY3VycmJsa1sndGFnJ10gPSAkdGFnOwoJCSRjdXJyYmxrWydhdHRyJ10gPSAkYXR0cjsKCgkJJHByb3BlcnRpZXMgPSAkdGhpcy0+Y3NzTWFuYWdlci0+TWVyZ2VDU1MoJ0JMT0NLJywgJHRhZywgJGF0dHIpOyAvLyBtUERGIDYgLSBtb3ZlZCB0byBhZnRlciBwYWdlLWJyZWFrLWJlZm9yZQoJCS8vIG1QREYgNiBwYWdlLWJyZWFrLWluc2lkZTphdm9pZAoJCWlmIChpc3NldCgkcHJvcGVydGllc1snUEFHRS1CUkVBSy1JTlNJREUnXSkgJiYgc3RydG91cHBlcigkcHJvcGVydGllc1snUEFHRS1CUkVBSy1JTlNJREUnXSkgPT09ICdBVk9JRCcKCQkJJiYgISR0aGlzLT5tcGRmLT5Db2xBY3RpdmUgJiYgISR0aGlzLT5tcGRmLT5rZWVwX2Jsb2NrX3RvZ2V0aGVyICYmICFpc3NldCgkYXR0clsnUEFHRUJSRUFLQVZPSURDSEVDS0VEJ10pKSB7CgkJCS8vIGF2b2lkIHJlLWl0ZXJhdGluZyB1c2luZyBQQUdFQlJFQUtBVk9JRENIRUNLRUQ7IHNldCBpbiBDbG9zZVRhZwoJCQkkY3VycmJsa1sna2VlcF9ibG9ja190b2dldGhlciddID0gMTsKCQkJJGN1cnJibGtbJ2FycmF5X2knXSA9ICRpaHRtbDsgLy8gbVBERiA2CgkJCSR0aGlzLT5tcGRmLT5rdF95MDAgPSAkdGhpcy0+bXBkZi0+eTsKCQkJJHRoaXMtPm1wZGYtPmt0X3AwMCA9ICR0aGlzLT5tcGRmLT5wYWdlOwoJCQkkdGhpcy0+bXBkZi0+a2VlcF9ibG9ja190b2dldGhlciA9IDE7CgkJfQoJCWlmICgkbGFzdGJvdHRvbW1hcmdpbiAmJiAhZW1wdHkoJHByb3BlcnRpZXNbJ01BUkdJTi1UT1AnXSkgJiYgZW1wdHkoJHByb3BlcnRpZXNbJ0ZMT0FUJ10pKSB7CgkJCSRjdXJyYmxrWydsYXN0Ym90dG9tbWFyZ2luJ10gPSAkbGFzdGJvdHRvbW1hcmdpbjsKCQl9CgoJCWlmIChpc3NldCgkcHJvcGVydGllc1snWi1JTkRFWCddKSAmJiAkdGhpcy0+bXBkZi0+Y3VycmVudF9sYXllciA9PSAwKSB7CgkJCSR2ID0gKGludCkgJHByb3BlcnRpZXNbJ1otSU5ERVgnXTsKCQkJaWYgKCR2ID4gMCkgewoJCQkJJGN1cnJibGtbJ3otaW5kZXgnXSA9ICR2OwoJCQkJJHRoaXMtPm1wZGYtPkJlZ2luTGF5ZXIoJHYpOwoJCQl9CgkJfQoKCgkJLy8gbVBERiA2ICBMaXN0cwoJCS8vIExpc3QtdHlwZSBzZXQgYnkgYXR0cmlidXRlCgkJaWYgKCR0YWcgPT09ICdPTCcgfHwgJHRhZyA9PT0gJ1VMJyB8fCAkdGFnID09PSAnTEknKSB7CgkJCWlmICghZW1wdHkoJGF0dHJbJ1RZUEUnXSkpIHsKCQkJCSRsaXN0dHlwZSA9ICRhdHRyWydUWVBFJ107CgkJCQlzd2l0Y2ggKCRsaXN0dHlwZSkgewoJCQkJCWNhc2UgJ0EnOgoJCQkJCQkkbGlzdHR5cGUgPSAndXBwZXItbGF0aW4nOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICdhJzoKCQkJCQkJJGxpc3R0eXBlID0gJ2xvd2VyLWxhdGluJzsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAnSSc6CgkJCQkJCSRsaXN0dHlwZSA9ICd1cHBlci1yb21hbic7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ2knOgoJCQkJCQkkbGlzdHR5cGUgPSAnbG93ZXItcm9tYW4nOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICcxJzoKCQkJCQkJJGxpc3R0eXBlID0gJ2RlY2ltYWwnOwoJCQkJCQlicmVhazsKCQkJCX0KCQkJCSRjdXJyYmxrWydsaXN0X3N0eWxlX3R5cGUnXSA9ICRsaXN0dHlwZTsKCQkJfQoJCX0KCgkJJHRoaXMtPm1wZGYtPnNldENTUygkcHJvcGVydGllcywgJ0JMT0NLJywgJHRhZyk7IC8vbmFtZShpZC9jbGFzcy9zdHlsZSkgZm91bmQgaW4gdGhlIENTUyBhcnJheSEKCQkkY3VycmJsa1snSW5saW5lUHJvcGVydGllcyddID0gJHRoaXMtPm1wZGYtPnNhdmVJbmxpbmVQcm9wZXJ0aWVzKCk7CgoJCWlmIChpc3NldCgkcHJvcGVydGllc1snVklTSUJJTElUWSddKSkgewoJCQkkdiA9IHN0cnRvbG93ZXIoJHByb3BlcnRpZXNbJ1ZJU0lCSUxJVFknXSk7CgkJCWlmICgoJHYgPT09ICdoaWRkZW4nIHx8ICR2ID09PSAncHJpbnRvbmx5JyB8fCAkdiA9PT0gJ3NjcmVlbm9ubHknKSAmJiAkdGhpcy0+bXBkZi0+dmlzaWJpbGl0eSA9PT0gJ3Zpc2libGUnICYmICEkdGhpcy0+bXBkZi0+dGFibGVMZXZlbCkgewoJCQkJJGN1cnJibGtbJ3Zpc2liaWxpdHknXSA9ICR2OwoJCQkJJHRoaXMtPm1wZGYtPlNldFZpc2liaWxpdHkoJHYpOwoJCQl9CgkJfQoKCQkvLyBtUERGIDYKCQlpZiAoIWVtcHR5KCRhdHRyWydBTElHTiddKSkgewoJCQkkY3VycmJsa1snYmxvY2stYWxpZ24nXSA9ICR0aGlzLT5nZXRBbGlnbigkYXR0clsnQUxJR04nXSk7CgkJfQoKCgkJaWYgKGlzc2V0KCRwcm9wZXJ0aWVzWydIRUlHSFQnXSkpIHsKCQkJJGN1cnJibGtbJ2Nzc19zZXRfaGVpZ2h0J10gPSAkdGhpcy0+c2l6ZUNvbnZlcnRlci0+Y29udmVydCgKCQkJCSRwcm9wZXJ0aWVzWydIRUlHSFQnXSwKCQkJCSR0aGlzLT5tcGRmLT5oIC0gJHRoaXMtPm1wZGYtPnRNYXJnaW4gLSAkdGhpcy0+bXBkZi0+Yk1hcmdpbiwKCQkJCSR0aGlzLT5tcGRmLT5Gb250U2l6ZSwKCQkJCWZhbHNlCgkJCSk7CgkJCWlmICgoJGN1cnJibGtbJ2Nzc19zZXRfaGVpZ2h0J10gKyAkdGhpcy0+bXBkZi0+eSkgPiAkdGhpcy0+bXBkZi0+UGFnZUJyZWFrVHJpZ2dlcgoJCQkJJiYgJHRoaXMtPm1wZGYtPnkgPiAkdGhpcy0+bXBkZi0+dE1hcmdpbiArIDUKCQkJCSYmICRjdXJyYmxrWydjc3Nfc2V0X2hlaWdodCddIDwgKCR0aGlzLT5tcGRmLT5oIC0gKCR0aGlzLT5tcGRmLT50TWFyZ2luICsgJHRoaXMtPm1wZGYtPmJNYXJnaW4pKSkgewoJCQkJJHRoaXMtPm1wZGYtPkFkZFBhZ2UoJHRoaXMtPm1wZGYtPkN1ck9yaWVudGF0aW9uKTsKCQkJfQoJCX0gZWxzZSB7CgkJCSRjdXJyYmxrWydjc3Nfc2V0X2hlaWdodCddID0gZmFsc2U7CgkJfQoKCgkJLy8gQWRkZWQgbVBERiAzLjAgRmxvYXQgRElWCgkJaWYgKGlzc2V0KCRwcmV2YmxrWydibG9ja0NvbnRleHQnXSkpIHsKCQkJJGN1cnJibGtbJ2Jsb2NrQ29udGV4dCddID0gJHByZXZibGtbJ2Jsb2NrQ29udGV4dCddOwoJCX0gLy8gKkNTUy1GTE9BVCoKCgkJaWYgKGlzc2V0KCRwcm9wZXJ0aWVzWydDTEVBUiddKSkgewoJCQkkdGhpcy0+bXBkZi0+Q2xlYXJGbG9hdHMoc3RydG91cHBlcigkcHJvcGVydGllc1snQ0xFQVInXSksICR0aGlzLT5tcGRmLT5ibGtsdmwgLSAxKTsKCQl9IC8vICpDU1MtRkxPQVQqCgoJCSRjdXJyYmxrWydwYWRkaW5nX2xlZnQnXSA9IGlzX251bWVyaWMoJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddKSA/ICRjdXJyYmxrWydwYWRkaW5nX2xlZnQnXSA6IDA7CgkJJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSA9IGlzX251bWVyaWMoJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSkgPyAkY3VycmJsa1sncGFkZGluZ19yaWdodCddIDogMDsKCgkJJGNvbnRhaW5lcl93ID0gJHByZXZibGtbJ2lubmVyX3dpZHRoJ107CgkJJGJkciA9ICRjdXJyYmxrWydib3JkZXJfcmlnaHQnXVsndyddOwoJCSRiZGwgPSAkY3VycmJsa1snYm9yZGVyX2xlZnQnXVsndyddOwoJCSRwZHIgPSAkY3VycmJsa1sncGFkZGluZ19yaWdodCddOwoJCSRwZGwgPSAkY3VycmJsa1sncGFkZGluZ19sZWZ0J107CgoJCSRzZXR3aWR0aCA9IDA7CgkJaWYgKGlzc2V0KCRjdXJyYmxrWydjc3Nfc2V0X3dpZHRoJ10pKSB7CgkJCSRzZXR3aWR0aCA9ICRjdXJyYmxrWydjc3Nfc2V0X3dpZHRoJ107CgkJfQoKCQkvKiAtLSBDU1MtRkxPQVQgLS0gKi8KCQlpZiAoaXNzZXQoJHByb3BlcnRpZXNbJ0ZMT0FUJ10pICYmIHN0cnRvdXBwZXIoJHByb3BlcnRpZXNbJ0ZMT0FUJ10pID09PSAnUklHSFQnICYmICEkdGhpcy0+bXBkZi0+Q29sQWN0aXZlKSB7CgoJCQkvLyBDYW5jZWwgS2VlcC1CbG9jay10b2dldGhlcgoJCQkkY3VycmJsa1sna2VlcF9ibG9ja190b2dldGhlciddID0gZmFsc2U7CgkJCSR0aGlzLT5tcGRmLT5rdF95MDAgPSAwOwoJCQkkdGhpcy0+bXBkZi0+a2VlcF9ibG9ja190b2dldGhlciA9IDA7CgoJCQkkdGhpcy0+bXBkZi0+YmxvY2tDb250ZXh0Kys7CgkJCSRjdXJyYmxrWydibG9ja0NvbnRleHQnXSA9ICR0aGlzLT5tcGRmLT5ibG9ja0NvbnRleHQ7CgoJCQlsaXN0KCRsX2V4aXN0cywgJHJfZXhpc3RzLCAkbF9tYXgsICRyX21heCwgJGxfd2lkdGgsICRyX3dpZHRoKSA9ICR0aGlzLT5tcGRmLT5HZXRGbG9hdERpdkluZm8oJHRoaXMtPm1wZGYtPmJsa2x2bCAtIDEpOwoKCQkJLy8gRElWIGlzIHRvbyBuYXJyb3cgZm9yIHRleHQgdG8gZml0IQoJCQkkbWF4dyA9ICRjb250YWluZXJfdyAtICRsX3dpZHRoIC0gJHJfd2lkdGg7CgkJCSRkb3VibGVDaGFyV2lkdGggPSAoMiAqICR0aGlzLT5tcGRmLT5HZXRDaGFyV2lkdGgoJ1cnLCBmYWxzZSkpOwoJCQlpZiAoKCRzZXR3aWR0aCArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpID4gJG1heHcKCQkJCXx8ICgkbWF4dyAtICgkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gKyAkYmRsICsgJHBkbCArICRiZHIgKyAkcGRyKSkgPCAoMiAqICR0aGlzLT5tcGRmLT5HZXRDaGFyV2lkdGgoJ1cnLCBmYWxzZSkpKSB7CgkJCQkvLyBUb28gbmFycm93IHRvIGZpdCAtIHRyeSB0byBtb3ZlIGRvd24gcGFzdCBMIG9yIFIgZmxvYXQKCQkJCWlmICgkbF9tYXggPCAkcl9tYXggJiYgKCRzZXR3aWR0aCArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpIDw9ICgkY29udGFpbmVyX3cgLSAkcl93aWR0aCkKCQkJCQkmJiAoKCRjb250YWluZXJfdyAtICRyX3dpZHRoKSAtICgkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gKyAkYmRsICsgJHBkbCArICRiZHIgKyAkcGRyKSkgPiAkZG91YmxlQ2hhcldpZHRoKSB7CgkJCQkJJHRoaXMtPm1wZGYtPkNsZWFyRmxvYXRzKCdMRUZUJywgJHRoaXMtPm1wZGYtPmJsa2x2bCAtIDEpOwoJCQkJfSBlbHNlaWYgKCRyX21heCA8ICRsX21heCAmJiAoJHNldHdpZHRoICsgJGN1cnJibGtbJ21hcmdpbl9yaWdodCddICsgJGJkbCArICRwZGwgKyAkYmRyICsgJHBkcikgPD0gKCRjb250YWluZXJfdyAtICRsX3dpZHRoKQoJCQkJCSYmICgoJGNvbnRhaW5lcl93IC0gJGxfd2lkdGgpIC0gKCRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpKSA+ICRkb3VibGVDaGFyV2lkdGgpIHsKCQkJCQkkdGhpcy0+bXBkZi0+Q2xlYXJGbG9hdHMoJ1JJR0hUJywgJHRoaXMtPm1wZGYtPmJsa2x2bCAtIDEpOwoJCQkJfSBlbHNlIHsKCQkJCQkkdGhpcy0+bXBkZi0+Q2xlYXJGbG9hdHMoJ0JPVEgnLCAkdGhpcy0+bXBkZi0+YmxrbHZsIC0gMSk7CgkJCQl9CgkJCQlsaXN0KCRsX2V4aXN0cywgJHJfZXhpc3RzLCAkbF9tYXgsICRyX21heCwgJGxfd2lkdGgsICRyX3dpZHRoKSA9ICR0aGlzLT5tcGRmLT5HZXRGbG9hdERpdkluZm8oJHRoaXMtPm1wZGYtPmJsa2x2bCAtIDEpOwoJCQl9CgoJCQlpZiAoJHJfZXhpc3RzKSB7CgkJCQkkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gKz0gJHJfd2lkdGg7CgkJCX0KCgkJCSRjdXJyYmxrWydmbG9hdCddID0gJ1InOwoJCQkkY3VycmJsa1snZmxvYXRfc3RhcnRfeSddID0gJHRoaXMtPm1wZGYtPnk7CgoJCQlpZiAoaXNzZXQoJGN1cnJibGtbJ2Nzc19zZXRfd2lkdGgnXSkpIHsKCQkJCSRjdXJyYmxrWydtYXJnaW5fbGVmdCddID0gJGNvbnRhaW5lcl93IC0gKCRzZXR3aWR0aCArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIgKyAkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10pOwoJCQkJJGN1cnJibGtbJ2Zsb2F0X3dpZHRoJ10gPSAoJHNldHdpZHRoICsgJGJkbCArICRwZGwgKyAkYmRyICsgJHBkciArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSk7CgkJCX0gZWxzZSB7CgkJCQkvLyAqKiogSWYgbm8gd2lkdGggc2V0IC0gd291bGQgbmVlZCB0byBidWZmZXIgYW5kIGtlZXAgdHJhY2sgb2YgbWF4IHdpZHRoLCB0aGVuIFJpZ2h0LWFsaWduIGlmIG5vdCBmdWxsIHdpZHRoCgkJCQkvLyBhbmQgZG8gYm9yZGVycyBhbmQgYmFja2dyb3VuZHMgLSBGb3Igbm93IC0ganVzdCBzZXQgdG8gbWF4aW11bSB3aWR0aCBsZWZ0CgoJCQkJaWYgKCRsX2V4aXN0cykgewoJCQkJCSRjdXJyYmxrWydtYXJnaW5fbGVmdCddICs9ICRsX3dpZHRoOwoJCQkJfQoJCQkJJGN1cnJibGtbJ2Nzc19zZXRfd2lkdGgnXSA9ICRjb250YWluZXJfdyAtICgkY3VycmJsa1snbWFyZ2luX2xlZnQnXSArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpOwoKCQkJCSRjdXJyYmxrWydmbG9hdF93aWR0aCddID0gKCRjdXJyYmxrWydjc3Nfc2V0X3dpZHRoJ10gKyAkYmRsICsgJHBkbCArICRiZHIgKyAkcGRyICsgJGN1cnJibGtbJ21hcmdpbl9yaWdodCddKTsKCQkJfQoKCQl9IGVsc2VpZiAoaXNzZXQoJHByb3BlcnRpZXNbJ0ZMT0FUJ10pICYmIHN0cnRvdXBwZXIoJHByb3BlcnRpZXNbJ0ZMT0FUJ10pID09PSAnTEVGVCcgJiYgISR0aGlzLT5tcGRmLT5Db2xBY3RpdmUpIHsKCQkJLy8gQ2FuY2VsIEtlZXAtQmxvY2stdG9nZXRoZXIKCQkJJGN1cnJibGtbJ2tlZXBfYmxvY2tfdG9nZXRoZXInXSA9IGZhbHNlOwoJCQkkdGhpcy0+bXBkZi0+a3RfeTAwID0gMDsKCQkJJHRoaXMtPm1wZGYtPmtlZXBfYmxvY2tfdG9nZXRoZXIgPSAwOwoKCQkJJHRoaXMtPm1wZGYtPmJsb2NrQ29udGV4dCsrOwoJCQkkY3VycmJsa1snYmxvY2tDb250ZXh0J10gPSAkdGhpcy0+bXBkZi0+YmxvY2tDb250ZXh0OwoKCQkJbGlzdCgkbF9leGlzdHMsICRyX2V4aXN0cywgJGxfbWF4LCAkcl9tYXgsICRsX3dpZHRoLCAkcl93aWR0aCkgPSAkdGhpcy0+bXBkZi0+R2V0RmxvYXREaXZJbmZvKCR0aGlzLT5tcGRmLT5ibGtsdmwgLSAxKTsKCgkJCS8vIERJViBpcyB0b28gbmFycm93IGZvciB0ZXh0IHRvIGZpdCEKCQkJJG1heHcgPSAkY29udGFpbmVyX3cgLSAkbF93aWR0aCAtICRyX3dpZHRoOwoJCQkkZG91YmxlQ2hhcldpZHRoID0gKDIgKiAkdGhpcy0+bXBkZi0+R2V0Q2hhcldpZHRoKCdXJywgZmFsc2UpKTsKCQkJaWYgKCgkc2V0d2lkdGggKyAkY3VycmJsa1snbWFyZ2luX2xlZnQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpID4gJG1heHcKCQkJCXx8ICgkbWF4dyAtICgkY3VycmJsa1snbWFyZ2luX2xlZnQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpKSA8ICgyICogJHRoaXMtPm1wZGYtPkdldENoYXJXaWR0aCgnVycsIGZhbHNlKSkpIHsKCQkJCS8vIFRvbyBuYXJyb3cgdG8gZml0IC0gdHJ5IHRvIG1vdmUgZG93biBwYXN0IEwgb3IgUiBmbG9hdAoJCQkJaWYgKCRsX21heCA8ICRyX21heCAmJiAoJHNldHdpZHRoICsgJGN1cnJibGtbJ21hcmdpbl9yaWdodCddICsgJGJkbCArICRwZGwgKyAkYmRyICsgJHBkcikgPD0gKCRjb250YWluZXJfdyAtICRyX3dpZHRoKQoJCQkJCSYmICgoJGNvbnRhaW5lcl93IC0gJHJfd2lkdGgpIC0gKCRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpKSA+ICRkb3VibGVDaGFyV2lkdGgpIHsKCQkJCQkkdGhpcy0+bXBkZi0+Q2xlYXJGbG9hdHMoJ0xFRlQnLCAkdGhpcy0+bXBkZi0+YmxrbHZsIC0gMSk7CgkJCQl9IGVsc2VpZiAoJHJfbWF4IDwgJGxfbWF4ICYmICgkc2V0d2lkdGggKyAkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gKyAkYmRsICsgJHBkbCArICRiZHIgKyAkcGRyKSA8PSAoJGNvbnRhaW5lcl93IC0gJGxfd2lkdGgpCgkJCQkJJiYgKCgkY29udGFpbmVyX3cgLSAkbF93aWR0aCkgLSAoJGN1cnJibGtbJ21hcmdpbl9yaWdodCddICsgJGJkbCArICRwZGwgKyAkYmRyICsgJHBkcikpID4gJGRvdWJsZUNoYXJXaWR0aCkgewoJCQkJCSR0aGlzLT5tcGRmLT5DbGVhckZsb2F0cygnUklHSFQnLCAkdGhpcy0+bXBkZi0+YmxrbHZsIC0gMSk7CgkJCQl9IGVsc2UgewoJCQkJCSR0aGlzLT5tcGRmLT5DbGVhckZsb2F0cygnQk9USCcsICR0aGlzLT5tcGRmLT5ibGtsdmwgLSAxKTsKCQkJCX0KCQkJCWxpc3QoJGxfZXhpc3RzLCAkcl9leGlzdHMsICRsX21heCwgJHJfbWF4LCAkbF93aWR0aCwgJHJfd2lkdGgpID0gJHRoaXMtPm1wZGYtPkdldEZsb2F0RGl2SW5mbygkdGhpcy0+bXBkZi0+YmxrbHZsIC0gMSk7CgkJCX0KCgkJCWlmICgkbF9leGlzdHMpIHsKCQkJCSRjdXJyYmxrWydtYXJnaW5fbGVmdCddICs9ICRsX3dpZHRoOwoJCQl9CgoJCQkkY3VycmJsa1snZmxvYXQnXSA9ICdMJzsKCQkJJGN1cnJibGtbJ2Zsb2F0X3N0YXJ0X3knXSA9ICR0aGlzLT5tcGRmLT55OwoJCQlpZiAoJHNldHdpZHRoKSB7CgkJCQkkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gPSAkY29udGFpbmVyX3cgLSAoJHNldHdpZHRoICsgJGJkbCArICRwZGwgKyAkYmRyICsgJHBkciArICRjdXJyYmxrWydtYXJnaW5fbGVmdCddKTsKCQkJCSRjdXJyYmxrWydmbG9hdF93aWR0aCddID0gKCRzZXR3aWR0aCArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIgKyAkY3VycmJsa1snbWFyZ2luX2xlZnQnXSk7CgkJCX0gZWxzZSB7CgkJCQkvLyAqKiogSWYgbm8gd2lkdGggc2V0IC0gd291bGQgbmVlZCB0byBidWZmZXIgYW5kIGtlZXAgdHJhY2sgb2YgbWF4IHdpZHRoLCB0aGVuIFJpZ2h0LWFsaWduIGlmIG5vdCBmdWxsIHdpZHRoCgkJCQkvLyBhbmQgZG8gYm9yZGVycyBhbmQgYmFja2dyb3VuZHMgLSBGb3Igbm93IC0ganVzdCBzZXQgdG8gbWF4aW11bSB3aWR0aCBsZWZ0CgoJCQkJaWYgKCRyX2V4aXN0cykgewoJCQkJCSRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArPSAkcl93aWR0aDsKCQkJCX0KCQkJCSRjdXJyYmxrWydjc3Nfc2V0X3dpZHRoJ10gPSAkY29udGFpbmVyX3cgLSAoJGN1cnJibGtbJ21hcmdpbl9sZWZ0J10gKyAkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gKyAkYmRsICsgJHBkbCArICRiZHIgKyAkcGRyKTsKCgkJCQkkY3VycmJsa1snZmxvYXRfd2lkdGgnXSA9ICgkY3VycmJsa1snY3NzX3NldF93aWR0aCddICsgJGJkbCArICRwZGwgKyAkYmRyICsgJHBkciArICRjdXJyYmxrWydtYXJnaW5fbGVmdCddKTsKCQkJfQoJCX0gZWxzZSB7CgkJCS8vIERvbid0IGFsbG93IG92ZXJsYXAgLSBpZiBmbG9hdHMgcHJlc2VudCAtIGFkanVzdCBwYWRkaW5nIHRvIGF2b2lkIG92ZXJsYXAgd2l0aCBGbG9hdHMKCQkJbGlzdCgkbF9leGlzdHMsICRyX2V4aXN0cywgJGxfbWF4LCAkcl9tYXgsICRsX3dpZHRoLCAkcl93aWR0aCkgPSAkdGhpcy0+bXBkZi0+R2V0RmxvYXREaXZJbmZvKCR0aGlzLT5tcGRmLT5ibGtsdmwgLSAxKTsKCQkJJG1heHcgPSAkY29udGFpbmVyX3cgLSAkbF93aWR0aCAtICRyX3dpZHRoOwoKCQkJJHBkbCA9IGlzX251bWVyaWMoJHBkbCkgPyAkcGRsIDogMDsKCQkJJHBkciA9IGlzX251bWVyaWMoJHBkcikgPyAkcGRyIDogMDsKCgkJCSRkb3VibGVDaGFyV2lkdGggPSAoMiAqICR0aGlzLT5tcGRmLT5HZXRDaGFyV2lkdGgoJ1cnLCBmYWxzZSkpOwoJCQlpZiAoKCRzZXR3aWR0aCArICRjdXJyYmxrWydtYXJnaW5fbGVmdCddICsgJGN1cnJibGtbJ21hcmdpbl9yaWdodCddICsgJGJkbCArICRwZGwgKyAkYmRyICsgJHBkcikgPiAkbWF4dwoJCQkJfHwgKCRtYXh3IC0gKCRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArICRjdXJyYmxrWydtYXJnaW5fbGVmdCddICsgJGJkbCArICRwZGwgKyAkYmRyICsgJHBkcikpIDwgJGRvdWJsZUNoYXJXaWR0aCkgewoJCQkJLy8gVG9vIG5hcnJvdyB0byBmaXQgLSB0cnkgdG8gbW92ZSBkb3duIHBhc3QgTCBvciBSIGZsb2F0CgkJCQlpZiAoJGxfbWF4IDwgJHJfbWF4ICYmICgkc2V0d2lkdGggKyAkY3VycmJsa1snbWFyZ2luX2xlZnQnXSArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpIDw9ICgkY29udGFpbmVyX3cgLSAkcl93aWR0aCkKCQkJCQkmJiAoKCRjb250YWluZXJfdyAtICRyX3dpZHRoKSAtICgkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gKyAkY3VycmJsa1snbWFyZ2luX2xlZnQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpKSA+ICRkb3VibGVDaGFyV2lkdGgpIHsKCQkJCQkkdGhpcy0+bXBkZi0+Q2xlYXJGbG9hdHMoJ0xFRlQnLCAkdGhpcy0+bXBkZi0+YmxrbHZsIC0gMSk7CgkJCQl9IGVsc2VpZiAoJHJfbWF4IDwgJGxfbWF4ICYmICgkc2V0d2lkdGggKyAkY3VycmJsa1snbWFyZ2luX2xlZnQnXSArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpIDw9ICgkY29udGFpbmVyX3cgLSAkbF93aWR0aCkKCQkJCQkmJiAoKCRjb250YWluZXJfdyAtICRsX3dpZHRoKSAtICgkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gKyAkY3VycmJsa1snbWFyZ2luX2xlZnQnXSArICRiZGwgKyAkcGRsICsgJGJkciArICRwZHIpKSA+ICRkb3VibGVDaGFyV2lkdGgpIHsKCQkJCQkkdGhpcy0+bXBkZi0+Q2xlYXJGbG9hdHMoJ1JJR0hUJywgJHRoaXMtPm1wZGYtPmJsa2x2bCAtIDEpOwoJCQkJfSBlbHNlIHsKCQkJCQkkdGhpcy0+bXBkZi0+Q2xlYXJGbG9hdHMoJ0JPVEgnLCAkdGhpcy0+bXBkZi0+YmxrbHZsIC0gMSk7CgkJCQl9CgkJCQlsaXN0KCRsX2V4aXN0cywgJHJfZXhpc3RzLCAkbF9tYXgsICRyX21heCwgJGxfd2lkdGgsICRyX3dpZHRoKSA9ICR0aGlzLT5tcGRmLT5HZXRGbG9hdERpdkluZm8oJHRoaXMtPm1wZGYtPmJsa2x2bCAtIDEpOwoJCQl9CgkJCWlmICgkcl9leGlzdHMpIHsKCQkJCSRjdXJyYmxrWydwYWRkaW5nX3JpZ2h0J10gPSBtYXgoJHJfd2lkdGggLSAkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gLSAkYmRyLCAkcGRyKTsKCQkJfQoJCQlpZiAoJGxfZXhpc3RzKSB7CgkJCQkkY3VycmJsa1sncGFkZGluZ19sZWZ0J10gPSBtYXgoJGxfd2lkdGggLSAkY3VycmJsa1snbWFyZ2luX2xlZnQnXSAtICRiZGwsICRwZGwpOwoJCQl9CgkJfQoJCS8qIC0tIEVORCBDU1MtRkxPQVQgLS0gKi8KCgoJCS8qIC0tIEJPUkRFUi1SQURJVVMgLS0gKi8KCQkvLyBBdXRvbWF0aWNhbGx5IGluY3JlYXNlIHBhZGRpbmcgaWYgcmVxdWlyZWQgZm9yIGJvcmRlci1yYWRpdXMKCQlpZiAoJHRoaXMtPm1wZGYtPmF1dG9QYWRkaW5nICYmICEkdGhpcy0+bXBkZi0+Q29sQWN0aXZlKSB7CgkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RMX0gnXSA9IEFycmF5czo6Z2V0KCRjdXJyYmxrLCAnYm9yZGVyX3JhZGl1c19UTF9IJywgMCk7CgkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RMX1YnXSA9IEFycmF5czo6Z2V0KCRjdXJyYmxrLCAnYm9yZGVyX3JhZGl1c19UTF9WJywgMCk7CgkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RSX0gnXSA9IEFycmF5czo6Z2V0KCRjdXJyYmxrLCAnYm9yZGVyX3JhZGl1c19UUl9IJywgMCk7CgkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RSX1YnXSA9IEFycmF5czo6Z2V0KCRjdXJyYmxrLCAnYm9yZGVyX3JhZGl1c19UUl9WJywgMCk7CgkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JMX0gnXSA9IEFycmF5czo6Z2V0KCRjdXJyYmxrLCAnYm9yZGVyX3JhZGl1c19CTF9IJywgMCk7CgkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JMX1YnXSA9IEFycmF5czo6Z2V0KCRjdXJyYmxrLCAnYm9yZGVyX3JhZGl1c19CTF9WJywgMCk7CgkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JSX0gnXSA9IEFycmF5czo6Z2V0KCRjdXJyYmxrLCAnYm9yZGVyX3JhZGl1c19CUl9IJywgMCk7CgkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JSX1YnXSA9IEFycmF5czo6Z2V0KCRjdXJyYmxrLCAnYm9yZGVyX3JhZGl1c19CUl9WJywgMCk7CgoJCQlpZiAoJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfVExfSCddID4gJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddICYmICRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RMX1YnXSA+ICRjdXJyYmxrWydwYWRkaW5nX3RvcCddKSB7CgkJCQlpZiAoJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfVExfSCddID4gJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfVExfViddKSB7CgkJCQkJJHRoaXMtPm1wZGYtPl9ib3JkZXJQYWRkaW5nKAoJCQkJCQkkY3VycmJsa1snYm9yZGVyX3JhZGl1c19UTF9IJ10sCgkJCQkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RMX1YnXSwKCQkJCQkJJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddLAoJCQkJCQkkY3VycmJsa1sncGFkZGluZ190b3AnXQoJCQkJCSk7CgkJCQl9IGVsc2UgewoJCQkJCSR0aGlzLT5tcGRmLT5fYm9yZGVyUGFkZGluZygKCQkJCQkJJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfVExfViddLAoJCQkJCQkkY3VycmJsa1snYm9yZGVyX3JhZGl1c19UTF9IJ10sCgkJCQkJCSRjdXJyYmxrWydwYWRkaW5nX3RvcCddLAoJCQkJCQkkY3VycmJsa1sncGFkZGluZ19sZWZ0J10KCQkJCQkpOwoJCQkJfQoJCQl9CgkJCWlmICgkY3VycmJsa1snYm9yZGVyX3JhZGl1c19UUl9IJ10gPiAkY3VycmJsa1sncGFkZGluZ19yaWdodCddICYmICRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RSX1YnXSA+ICRjdXJyYmxrWydwYWRkaW5nX3RvcCddKSB7CgkJCQlpZiAoJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfVFJfSCddID4gJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfVFJfViddKSB7CgkJCQkJJHRoaXMtPm1wZGYtPl9ib3JkZXJQYWRkaW5nKAoJCQkJCQkkY3VycmJsa1snYm9yZGVyX3JhZGl1c19UUl9IJ10sCgkJCQkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RSX1YnXSwKCQkJCQkJJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSwKCQkJCQkJJGN1cnJibGtbJ3BhZGRpbmdfdG9wJ10KCQkJCQkpOwoJCQkJfSBlbHNlIHsKCQkJCQkkdGhpcy0+bXBkZi0+X2JvcmRlclBhZGRpbmcoCgkJCQkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX1RSX1YnXSwKCQkJCQkJJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfVFJfSCddLAoJCQkJCQkkY3VycmJsa1sncGFkZGluZ190b3AnXSwKCQkJCQkJJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXQoJCQkJCSk7CgkJCQl9CgkJCX0KCQkJaWYgKCRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JMX0gnXSA+ICRjdXJyYmxrWydwYWRkaW5nX2xlZnQnXSAmJiAkY3VycmJsa1snYm9yZGVyX3JhZGl1c19CTF9WJ10gPiAkY3VycmJsa1sncGFkZGluZ19ib3R0b20nXSkgewoJCQkJaWYgKCRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JMX0gnXSA+ICRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JMX1YnXSkgewoJCQkJCSR0aGlzLT5tcGRmLT5fYm9yZGVyUGFkZGluZygKCQkJCQkJJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfQkxfSCddLAoJCQkJCQkkY3VycmJsa1snYm9yZGVyX3JhZGl1c19CTF9WJ10sCgkJCQkJCSRjdXJyYmxrWydwYWRkaW5nX2xlZnQnXSwKCQkJCQkJJGN1cnJibGtbJ3BhZGRpbmdfYm90dG9tJ10KCQkJCQkpOwoJCQkJfSBlbHNlIHsKCQkJCQkkdGhpcy0+bXBkZi0+X2JvcmRlclBhZGRpbmcoCgkJCQkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JMX1YnXSwKCQkJCQkJJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfQkxfSCddLAoJCQkJCQkkY3VycmJsa1sncGFkZGluZ19ib3R0b20nXSwKCQkJCQkJJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddCgkJCQkJKTsKCQkJCX0KCQkJfQoJCQlpZiAoJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfQlJfSCddID4gJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSAmJiAkY3VycmJsa1snYm9yZGVyX3JhZGl1c19CUl9WJ10gPiAkY3VycmJsa1sncGFkZGluZ19ib3R0b20nXSkgewoJCQkJaWYgKCRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JSX0gnXSA+ICRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JSX1YnXSkgewoJCQkJCSR0aGlzLT5tcGRmLT5fYm9yZGVyUGFkZGluZygKCQkJCQkJJGN1cnJibGtbJ2JvcmRlcl9yYWRpdXNfQlJfSCddLAoJCQkJCQkkY3VycmJsa1snYm9yZGVyX3JhZGl1c19CUl9WJ10sCgkJCQkJCSRjdXJyYmxrWydwYWRkaW5nX3JpZ2h0J10sCgkJCQkJCSRjdXJyYmxrWydwYWRkaW5nX2JvdHRvbSddCgkJCQkJKTsKCQkJCX0gZWxzZSB7CgkJCQkJJHRoaXMtPm1wZGYtPl9ib3JkZXJQYWRkaW5nKAoJCQkJCQkkY3VycmJsa1snYm9yZGVyX3JhZGl1c19CUl9WJ10sCgkJCQkJCSRjdXJyYmxrWydib3JkZXJfcmFkaXVzX0JSX0gnXSwKCQkJCQkJJGN1cnJibGtbJ3BhZGRpbmdfYm90dG9tJ10sCgkJCQkJCSRjdXJyYmxrWydwYWRkaW5nX3JpZ2h0J10KCQkJCQkpOwoJCQkJfQoJCQl9CgkJfQoJCS8qIC0tIEVORCBCT1JERVItUkFESVVTIC0tICovCgoJCS8vIEhhbmdpbmcgaW5kZW50IC0gaWYgbmVnYXRpdmUgaW5kZW50OiBlbnN1cmUgcGFkZGluZyBpcyA+PSBpbmRlbnQKCQlpZiAoIWlzc2V0KCRjdXJyYmxrWyd0ZXh0X2luZGVudCddKSkgewoJCQkkY3VycmJsa1sndGV4dF9pbmRlbnQnXSA9IG51bGw7CgkJfQoJCWlmICghaXNzZXQoJGN1cnJibGtbJ2lubmVyX3dpZHRoJ10pKSB7CgkJCSRjdXJyYmxrWydpbm5lcl93aWR0aCddID0gbnVsbDsKCQl9CgkJJGNidGkgPSAkdGhpcy0+c2l6ZUNvbnZlcnRlci0+Y29udmVydCgKCQkJJGN1cnJibGtbJ3RleHRfaW5kZW50J10sCgkJCSR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ2lubmVyX3dpZHRoJ10sCgkJCSR0aGlzLT5tcGRmLT5Gb250U2l6ZSwKCQkJZmFsc2UKCQkpOwoJCWlmICgkY2J0aSA8IDApIHsKCQkJJGhhbmdpbmQgPSAtJGNidGk7CgkJCWlmIChpc3NldCgkY3VycmJsa1snZGlyZWN0aW9uJ10pICYmICRjdXJyYmxrWydkaXJlY3Rpb24nXSA9PT0gJ3J0bCcpIHsgLy8gKk9UTCoKCQkJCSRjdXJyYmxrWydwYWRkaW5nX3JpZ2h0J10gPSBtYXgoJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSwgJGhhbmdpbmQpOyAvLyAqT1RMKgoJCQl9IC8vICpPVEwqCgkJCWVsc2UgeyAvLyAqT1RMKgoJCQkJJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddID0gbWF4KCRjdXJyYmxrWydwYWRkaW5nX2xlZnQnXSwgJGhhbmdpbmQpOwoJCQl9IC8vICpPVEwqCgkJfQoKCQlpZiAoaXNzZXQoJGN1cnJibGtbJ2Nzc19zZXRfd2lkdGgnXSkpIHsKCQkJaWYgKGlzc2V0KCRwcm9wZXJ0aWVzWydNQVJHSU4tTEVGVCddLCAkcHJvcGVydGllc1snTUFSR0lOLVJJR0hUJ10pCgkJCQkmJiBzdHJ0b2xvd2VyKCRwcm9wZXJ0aWVzWydNQVJHSU4tTEVGVCddKSA9PT0gJ2F1dG8nICYmIHN0cnRvbG93ZXIoJHByb3BlcnRpZXNbJ01BUkdJTi1SSUdIVCddKSA9PT0gJ2F1dG8nKSB7CgkJCQkvLyBUcnkgdG8gcmVkdWNlIG1hcmdpbnMgdG8gYWNjb21vZGF0ZSAtIGlmIHN0aWxsIHRvbyB3aWRlLCBzZXQgbWFyZ2luLXJpZ2h0L2xlZnQ9MCAocmVkdWNlcyB3aWR0aCkKCQkJCSRhbnlleHRyYSA9ICRwcmV2YmxrWydpbm5lcl93aWR0aCddIC0gKCRjdXJyYmxrWydjc3Nfc2V0X3dpZHRoJ10gKyAkY3VycmJsa1snYm9yZGVyX2xlZnQnXVsndyddCgkJCQkJCSsgJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddICsgJGN1cnJibGtbJ2JvcmRlcl9yaWdodCddWyd3J10gKyAkY3VycmJsa1sncGFkZGluZ19yaWdodCddKTsKCQkJCWlmICgkYW55ZXh0cmEgPiAwKSB7CgkJCQkJJGN1cnJibGtbJ21hcmdpbl9sZWZ0J10gPSAkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gPSAkYW55ZXh0cmEgLyAyOwoJCQkJfSBlbHNlIHsKCQkJCQkkY3VycmJsa1snbWFyZ2luX2xlZnQnXSA9ICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSA9IDA7CgkJCQl9CgkJCX0gZWxzZWlmIChpc3NldCgkcHJvcGVydGllc1snTUFSR0lOLUxFRlQnXSkgJiYgc3RydG9sb3dlcigkcHJvcGVydGllc1snTUFSR0lOLUxFRlQnXSkgPT09ICdhdXRvJykgewoJCQkJLy8gVHJ5IHRvIHJlZHVjZSBtYXJnaW4tbGVmdCB0byBhY2NvbW9kYXRlIC0gaWYgc3RpbGwgdG9vIHdpZGUsIHNldCBtYXJnaW4tbGVmdD0wIChyZWR1Y2VzIHdpZHRoKQoJCQkJJGN1cnJibGtbJ21hcmdpbl9sZWZ0J10gPSAkcHJldmJsa1snaW5uZXJfd2lkdGgnXSAtICgkY3VycmJsa1snY3NzX3NldF93aWR0aCddCgkJCQkJCSsgJGN1cnJibGtbJ2JvcmRlcl9sZWZ0J11bJ3cnXSArICRjdXJyYmxrWydwYWRkaW5nX2xlZnQnXSArICRjdXJyYmxrWydib3JkZXJfcmlnaHQnXVsndyddCgkJCQkJCSsgJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSk7CgkJCQlpZiAoJGN1cnJibGtbJ21hcmdpbl9sZWZ0J10gPCAwKSB7CgkJCQkJJGN1cnJibGtbJ21hcmdpbl9sZWZ0J10gPSAwOwoJCQkJfQoJCQl9IGVsc2VpZiAoaXNzZXQoJHByb3BlcnRpZXNbJ01BUkdJTi1SSUdIVCddKSAmJiBzdHJ0b2xvd2VyKCRwcm9wZXJ0aWVzWydNQVJHSU4tUklHSFQnXSkgPT09ICdhdXRvJykgewoJCQkJLy8gVHJ5IHRvIHJlZHVjZSBtYXJnaW4tcmlnaHQgdG8gYWNjb21vZGF0ZSAtIGlmIHN0aWxsIHRvbyB3aWRlLCBzZXQgbWFyZ2luLXJpZ2h0PTAgKHJlZHVjZXMgd2lkdGgpCgkJCQkkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gPSAkcHJldmJsa1snaW5uZXJfd2lkdGgnXSAtICgkY3VycmJsa1snY3NzX3NldF93aWR0aCddCgkJCQkJCSsgJGN1cnJibGtbJ2JvcmRlcl9sZWZ0J11bJ3cnXSArICRjdXJyYmxrWydwYWRkaW5nX2xlZnQnXQoJCQkJCQkrICRjdXJyYmxrWydib3JkZXJfcmlnaHQnXVsndyddICsgJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSArICRjdXJyYmxrWydtYXJnaW5fbGVmdCddKTsKCQkJCWlmICgkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gPCAwKSB7CgkJCQkJJGN1cnJibGtbJ21hcmdpbl9yaWdodCddID0gMDsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWlmICgkY3VycmJsa1snZGlyZWN0aW9uJ10gPT09ICdydGwnKSB7IC8vICpPVEwqCgkJCQkJLy8gVHJ5IHRvIHJlZHVjZSBtYXJnaW4tbGVmdCB0byBhY2NvbW9kYXRlIC0gaWYgc3RpbGwgdG9vIHdpZGUsIHNldCBtYXJnaW4tbGVmdD0wIChyZWR1Y2VzIHdpZHRoKQoJCQkJCSRjdXJyYmxrWydtYXJnaW5fbGVmdCddID0gJHByZXZibGtbJ2lubmVyX3dpZHRoJ10gLSAoJGN1cnJibGtbJ2Nzc19zZXRfd2lkdGgnXQoJCQkJCQkJKyAkY3VycmJsa1snYm9yZGVyX2xlZnQnXVsndyddICsgJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddICsgJGN1cnJibGtbJ2JvcmRlcl9yaWdodCddWyd3J10KCQkJCQkJCSsgJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXSk7IC8vICpPVEwqCgkJCQkJaWYgKCRjdXJyYmxrWydtYXJnaW5fbGVmdCddIDwgMCkgeyAvLyAqT1RMKgoJCQkJCQkkY3VycmJsa1snbWFyZ2luX2xlZnQnXSA9IDA7IC8vICpPVEwqCgkJCQkJfSAvLyAqT1RMKgoJCQkJfSAvLyAqT1RMKgoJCQkJZWxzZSB7IC8vICpPVEwqCgkJCQkJLy8gVHJ5IHRvIHJlZHVjZSBtYXJnaW4tcmlnaHQgdG8gYWNjb21vZGF0ZSAtIGlmIHN0aWxsIHRvbyB3aWRlLCBzZXQgbWFyZ2luLXJpZ2h0PTAgKHJlZHVjZXMgd2lkdGgpCgkJCQkJJGN1cnJibGtbJ21hcmdpbl9yaWdodCddID0gJHByZXZibGtbJ2lubmVyX3dpZHRoJ10gLSAoJGN1cnJibGtbJ2Nzc19zZXRfd2lkdGgnXQoJCQkJCQkJKyAkY3VycmJsa1snYm9yZGVyX2xlZnQnXVsndyddICsgJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddICsgJGN1cnJibGtbJ2JvcmRlcl9yaWdodCddWyd3J10KCQkJCQkJCSsgJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSArICRjdXJyYmxrWydtYXJnaW5fbGVmdCddKTsKCQkJCQlpZiAoJGN1cnJibGtbJ21hcmdpbl9yaWdodCddIDwgMCkgewoJCQkJCQkkY3VycmJsa1snbWFyZ2luX3JpZ2h0J10gPSAwOwoJCQkJCX0KCQkJCX0gLy8gKk9UTCoKCQkJfQoJCX0KCgkJJGN1cnJibGtbJ291dGVyX2xlZnRfbWFyZ2luJ10gPSAkcHJldmJsa1snb3V0ZXJfbGVmdF9tYXJnaW4nXSArICRjdXJyYmxrWydtYXJnaW5fbGVmdCddCgkJCSsgJHByZXZibGtbJ2JvcmRlcl9sZWZ0J11bJ3cnXSArICRwcmV2YmxrWydwYWRkaW5nX2xlZnQnXTsKCgkJJGN1cnJibGtbJ291dGVyX3JpZ2h0X21hcmdpbiddID0gJHByZXZibGtbJ291dGVyX3JpZ2h0X21hcmdpbiddICsgJGN1cnJibGtbJ21hcmdpbl9yaWdodCddCgkJCSsgJHByZXZibGtbJ2JvcmRlcl9yaWdodCddWyd3J10gKyAkcHJldmJsa1sncGFkZGluZ19yaWdodCddOwoKCQkkY3VycmJsa1snd2lkdGgnXSA9ICR0aGlzLT5tcGRmLT5wZ3dpZHRoIC0gKCRjdXJyYmxrWydvdXRlcl9yaWdodF9tYXJnaW4nXSArICRjdXJyYmxrWydvdXRlcl9sZWZ0X21hcmdpbiddKTsKCgkJJGN1cnJibGtbJ2lubmVyX3dpZHRoJ10gPSAkY3VycmJsa1snd2lkdGgnXQoJCQktICgkY3VycmJsa1snYm9yZGVyX2xlZnQnXVsndyddICsgJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddICsgJGN1cnJibGtbJ2JvcmRlcl9yaWdodCddWyd3J10gKyAkY3VycmJsa1sncGFkZGluZ19yaWdodCddKTsKCgkJLy8gQ2hlY2sgRElWIGlzIG5vdCBub3cgdG9vIG5hcnJvdyB0byBmaXQgdGV4dAoJCSRtdyA9IDIgKiAkdGhpcy0+bXBkZi0+R2V0Q2hhcldpZHRoKCdXJywgZmFsc2UpOwoJCWlmICgkY3VycmJsa1snaW5uZXJfd2lkdGgnXSA8ICRtdykgewoJCQkkY3VycmJsa1sncGFkZGluZ19sZWZ0J10gPSAwOwoJCQkkY3VycmJsa1sncGFkZGluZ19yaWdodCddID0gMDsKCQkJJGN1cnJibGtbJ2JvcmRlcl9sZWZ0J11bJ3cnXSA9IDAuMjsKCQkJJGN1cnJibGtbJ2JvcmRlcl9yaWdodCddWyd3J10gPSAwLjI7CgkJCSRjdXJyYmxrWydtYXJnaW5fbGVmdCddID0gMDsKCQkJJGN1cnJibGtbJ21hcmdpbl9yaWdodCddID0gMDsKCQkJJGN1cnJibGtbJ291dGVyX2xlZnRfbWFyZ2luJ10gPSAkcHJldmJsa1snb3V0ZXJfbGVmdF9tYXJnaW4nXSArICRjdXJyYmxrWydtYXJnaW5fbGVmdCddCgkJCQkrICRwcmV2YmxrWydib3JkZXJfbGVmdCddWyd3J10gKyAkcHJldmJsa1sncGFkZGluZ19sZWZ0J107CgkJCSRjdXJyYmxrWydvdXRlcl9yaWdodF9tYXJnaW4nXSA9ICRwcmV2YmxrWydvdXRlcl9yaWdodF9tYXJnaW4nXSArICRjdXJyYmxrWydtYXJnaW5fcmlnaHQnXQoJCQkJKyAkcHJldmJsa1snYm9yZGVyX3JpZ2h0J11bJ3cnXSArICRwcmV2YmxrWydwYWRkaW5nX3JpZ2h0J107CgkJCSRjdXJyYmxrWyd3aWR0aCddID0gJHRoaXMtPm1wZGYtPnBnd2lkdGggLSAoJGN1cnJibGtbJ291dGVyX3JpZ2h0X21hcmdpbiddICsgJGN1cnJibGtbJ291dGVyX2xlZnRfbWFyZ2luJ10pOwoJCQkkY3VycmJsa1snaW5uZXJfd2lkdGgnXSA9ICR0aGlzLT5tcGRmLT5wZ3dpZHRoIC0gKCRjdXJyYmxrWydvdXRlcl9yaWdodF9tYXJnaW4nXQoJCQkJCSsgJGN1cnJibGtbJ291dGVyX2xlZnRfbWFyZ2luJ10gKyAkY3VycmJsa1snYm9yZGVyX2xlZnQnXVsndyddICsgJGN1cnJibGtbJ3BhZGRpbmdfbGVmdCddCgkJCQkJKyAkY3VycmJsa1snYm9yZGVyX3JpZ2h0J11bJ3cnXSArICRjdXJyYmxrWydwYWRkaW5nX3JpZ2h0J10pOwoJCQkvLyBpZiAoJGN1cnJibGtbJ2lubmVyX3dpZHRoJ10gPCAkbXcpIHsgdGhyb3cgbmV3IFxNcGRmXE1wZGZFeGNlcHRpb24oIkRJViBpcyB0b28gbmFycm93IGZvciB0ZXh0IHRvIGZpdCEiKTsgfQoJCX0KCgkJJHRoaXMtPm1wZGYtPnggPSAkdGhpcy0+bXBkZi0+bE1hcmdpbiArICRjdXJyYmxrWydvdXRlcl9sZWZ0X21hcmdpbiddOwoKCQkvKiAtLSBCQUNLR1JPVU5EUyAtLSAqLwoJCWlmICghZW1wdHkoJHByb3BlcnRpZXNbJ0JBQ0tHUk9VTkQtSU1BR0UnXSkgJiYgISR0aGlzLT5tcGRmLT5rd3QgJiYgISR0aGlzLT5tcGRmLT5Db2xBY3RpdmUgJiYgISR0aGlzLT5tcGRmLT5rZWVwX2Jsb2NrX3RvZ2V0aGVyKSB7CgkJCSRyZXQgPSAkdGhpcy0+bXBkZi0+U2V0QmFja2dyb3VuZCgkcHJvcGVydGllcywgJGN1cnJibGtbJ2lubmVyX3dpZHRoJ10pOwoJCQlpZiAoJHJldCkgewoJCQkJJGN1cnJibGtbJ2JhY2tncm91bmQtaW1hZ2UnXSA9ICRyZXQ7CgkJCX0KCQl9CgkJLyogLS0gRU5EIEJBQ0tHUk9VTkRTIC0tICovCgoJCS8qIC0tIFRBQkxFUyAtLSAqLwoJCWlmICgkdGhpcy0+bXBkZi0+dXNlX2t3dCAmJiBpc3NldCgkYXR0clsnS0VFUC1XSVRILVRBQkxFJ10pICYmICEkdGhpcy0+bXBkZi0+Q29sQWN0aXZlICYmICEkdGhpcy0+bXBkZi0+a2VlcF9ibG9ja190b2dldGhlcikgewoJCQkkdGhpcy0+bXBkZi0+a3d0ID0gdHJ1ZTsKCQkJJHRoaXMtPm1wZGYtPmt3dF95MCA9ICR0aGlzLT5tcGRmLT55OwoJCQkvLyR0aGlzLT5tcGRmLT5rd3RfeDAgPSAkdGhpcy0+bXBkZi0+eDsKCQkJJHRoaXMtPm1wZGYtPmt3dF94MCA9ICR0aGlzLT5tcGRmLT5sTWFyZ2luOyAvLyBtUERGIDYKCQkJJHRoaXMtPm1wZGYtPmt3dF9oZWlnaHQgPSAwOwoJCQkkdGhpcy0+bXBkZi0+a3d0X2J1ZmZlciA9IFtdOwoJCQkkdGhpcy0+bXBkZi0+a3d0X0xpbmtzID0gW107CgkJCSR0aGlzLT5tcGRmLT5rd3RfQW5ub3RzID0gW107CgkJCSR0aGlzLT5tcGRmLT5rd3RfbW92ZWQgPSBmYWxzZTsKCQkJJHRoaXMtPm1wZGYtPmt3dF9zYXZlZCA9IGZhbHNlOwoJCQkkdGhpcy0+bXBkZi0+a3d0X1JlZmVyZW5jZSA9IFtdOwoJCQkkdGhpcy0+bXBkZi0+a3d0X0JNb3V0bGluZXMgPSBbXTsKCQkJJHRoaXMtPm1wZGYtPmt3dF90b2MgPSBbXTsKCQl9IGVsc2UgewoJCQkvKiAtLSBFTkQgVEFCTEVTIC0tICovCgkJCSR0aGlzLT5tcGRmLT5rd3QgPSBmYWxzZTsKCQl9IC8vICpUQUJMRVMqCgoJCS8vIFNhdmUgeCx5IGNvb3JkcyBpbiBjYXNlIHdlIG5lZWQgdG8gcHJpbnQgYm9yZGVycy4uLgoJCSRjdXJyYmxrWyd5MCddID0gJHRoaXMtPm1wZGYtPnk7CgkJJGN1cnJibGtbJ2luaXRpYWxfeTAnXSA9ICR0aGlzLT5tcGRmLT55OyAvLyBtUERGIDYKCQkkY3VycmJsa1sneDAnXSA9ICR0aGlzLT5tcGRmLT54OwoJCSRjdXJyYmxrWydpbml0aWFsX3gwJ10gPSAkdGhpcy0+bXBkZi0+eDsgLy8gbVBERiA2CgkJJGN1cnJibGtbJ2luaXRpYWxfc3RhcnRwYWdlJ10gPSAkdGhpcy0+bXBkZi0+cGFnZTsKCQkkY3VycmJsa1snc3RhcnRwYWdlJ10gPSAkdGhpcy0+bXBkZi0+cGFnZTsgLy8gbVBERiA2CgkJJHRoaXMtPm1wZGYtPm9sZHkgPSAkdGhpcy0+bXBkZi0+eTsKCgkJJHRoaXMtPm1wZGYtPmxhc3RibG9ja2xldmVsY2hhbmdlID0gMTsKCgkJLy8gbVBERiA2ICBMaXN0cwoJCWlmICgkdGFnID09PSAnT0wnIHx8ICR0YWcgPT09ICdVTCcpIHsKCQkJJHRoaXMtPm1wZGYtPmxpc3RsdmwrKzsKCQkJaWYgKCFlbXB0eSgkYXR0clsnU1RBUlQnXSkpIHsKCQkJCSR0aGlzLT5tcGRmLT5saXN0Y291bnRlclskdGhpcy0+bXBkZi0+bGlzdGx2bF0gPSAoaW50KSAkYXR0clsnU1RBUlQnXSAtIDE7CgkJCX0gZWxzZSB7CgkJCQkkdGhpcy0+bXBkZi0+bGlzdGNvdW50ZXJbJHRoaXMtPm1wZGYtPmxpc3RsdmxdID0gMDsKCQkJfQoJCQkkdGhpcy0+bXBkZi0+bGlzdGl0ZW0gPSBbXTsKCgkJCS8vIExpc3QtdHlwZQoJCQlpZiAoZW1wdHkoJGN1cnJibGtbJ2xpc3Rfc3R5bGVfdHlwZSddKSkgewoJCQkJaWYgKCR0YWcgPT09ICdPTCcpIHsKCQkJCQkkY3VycmJsa1snbGlzdF9zdHlsZV90eXBlJ10gPSAnZGVjaW1hbCc7CgkJCQl9IGVsc2VpZiAoJHRhZyA9PT0gJ1VMJykgewoJCQkJCWlmICgkdGhpcy0+bXBkZi0+bGlzdGx2bCAlIDMgPT0gMSkgewoJCQkJCQkkY3VycmJsa1snbGlzdF9zdHlsZV90eXBlJ10gPSAnZGlzYyc7CgkJCQkJfSBlbHNlaWYgKCR0aGlzLT5tcGRmLT5saXN0bHZsICUgMyA9PSAyKSB7CgkJCQkJCSRjdXJyYmxrWydsaXN0X3N0eWxlX3R5cGUnXSA9ICdjaXJjbGUnOwoJCQkJCX0gZWxzZSB7CgkJCQkJCSRjdXJyYmxrWydsaXN0X3N0eWxlX3R5cGUnXSA9ICdzcXVhcmUnOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gTGlzdC1pbWFnZQoJCQlpZiAoZW1wdHkoJGN1cnJibGtbJ2xpc3Rfc3R5bGVfaW1hZ2UnXSkpIHsKCQkJCSRjdXJyYmxrWydsaXN0X3N0eWxlX2ltYWdlJ10gPSAnbm9uZSc7CgkJCX0KCgkJCS8vIExpc3QtcG9zaXRpb24KCQkJaWYgKGVtcHR5KCRjdXJyYmxrWydsaXN0X3N0eWxlX3Bvc2l0aW9uJ10pKSB7CgkJCQkkY3VycmJsa1snbGlzdF9zdHlsZV9wb3NpdGlvbiddID0gJ291dHNpZGUnOwoJCQl9CgoJCQkvLyBEZWZhdWx0IGluZGVudGF0aW9uIHVzaW5nIHBhZGRpbmcKCQkJaWYgKHN0cnRvbG93ZXIoJHRoaXMtPm1wZGYtPmxpc3RfYXV0b19tb2RlKSA9PT0gJ21wZGYnICYmIGlzc2V0KCRjdXJyYmxrWydsaXN0X3N0eWxlX3Bvc2l0aW9uJ10pCgkJCQkmJiAkY3VycmJsa1snbGlzdF9zdHlsZV9wb3NpdGlvbiddID09PSAnb3V0c2lkZScgJiYgaXNzZXQoJGN1cnJibGtbJ2xpc3Rfc3R5bGVfaW1hZ2UnXSkKCQkJCSYmICRjdXJyYmxrWydsaXN0X3N0eWxlX2ltYWdlJ10gPT09ICdub25lJyAmJiAoIWlzc2V0KCRjdXJyYmxrWydsaXN0X3N0eWxlX3R5cGUnXSkKCQkJCQl8fCAhcHJlZ19tYXRjaCgnL1VcKyhbYS1mQS1GMC05XSspL2knLCAkY3VycmJsa1snbGlzdF9zdHlsZV90eXBlJ10pKSkgewoJCQkJJGF1dG9wYWRkaW5nID0gJHRoaXMtPm1wZGYtPl9nZXRMaXN0TWFya2VyV2lkdGgoJGN1cnJibGssICRhaHRtbCwgJGlodG1sKTsKCQkJCWlmICgkdGhpcy0+bXBkZi0+bGlzdGx2bCA+IDEgfHwgJHRoaXMtPm1wZGYtPmxpc3RfaW5kZW50X2ZpcnN0X2xldmVsKSB7CgkJCQkJJGF1dG9wYWRkaW5nICs9ICR0aGlzLT5zaXplQ29udmVydGVyLT5jb252ZXJ0KAoJCQkJCQkkdGhpcy0+bXBkZi0+bGlzdF9pbmRlbnRfZGVmYXVsdCwKCQkJCQkJJGN1cnJibGtbJ2lubmVyX3dpZHRoJ10sCgkJCQkJCSR0aGlzLT5tcGRmLT5Gb250U2l6ZSwKCQkJCQkJZmFsc2UKCQkJCQkpOwoJCQkJfQoJCQkJLy8gYXV0b3BhZGRpbmcgdmFsdWUgaXMgYXBwbGllZCB0byBsZWZ0IG9yIHJpZ2h0IGFjY29yZGluZwoJCQkJLy8gdG8gZGlyIG9mIGJsb2NrLiBPbmNlIGEgQ1NTIHZhbHVlIGlzIHNldCBmb3IgcGFkZGluZyBpdCBvdmVycmlkZXMgdGhpcyBkZWZhdWx0IHZhbHVlLgoJCQkJaWYgKGlzc2V0KCRwcm9wZXJ0aWVzWydQQURESU5HLVJJR0hUJ10pICYmICRwcm9wZXJ0aWVzWydQQURESU5HLVJJR0hUJ10gPT09ICdhdXRvJwoJCQkJCSYmIGlzc2V0KCRjdXJyYmxrWydkaXJlY3Rpb24nXSkgJiYgJGN1cnJibGtbJ2RpcmVjdGlvbiddID09PSAncnRsJykgewoJCQkJCSRjdXJyYmxrWydwYWRkaW5nX3JpZ2h0J10gPSAkYXV0b3BhZGRpbmc7CgkJCQl9IGVsc2VpZiAoaXNzZXQoJHByb3BlcnRpZXNbJ1BBRERJTkctTEVGVCddKSAmJiAkcHJvcGVydGllc1snUEFERElORy1MRUZUJ10gPT09ICdhdXRvJykgewoJCQkJCSRjdXJyYmxrWydwYWRkaW5nX2xlZnQnXSA9ICRhdXRvcGFkZGluZzsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCS8vIEluaXRpYWwgZGVmYXVsdCB2YWx1ZSBpcyBzZXQgYnkgJHRoaXMtPm1wZGYtPmxpc3RfaW5kZW50X2RlZmF1bHQgaW4gY29uZmlnLnBocDsgdGhpcyB2YWx1ZSBpcyBhcHBsaWVkIHRvIGxlZnQgb3IgcmlnaHQgYWNjb3JkaW5nCgkJCQkvLyB0byBkaXIgb2YgYmxvY2suIE9uY2UgYSBDU1MgdmFsdWUgaXMgc2V0IGZvciBwYWRkaW5nIGl0IG92ZXJyaWRlcyB0aGlzIGRlZmF1bHQgdmFsdWUuCgkJCQlpZiAoaXNzZXQoJHByb3BlcnRpZXNbJ1BBRERJTkctUklHSFQnXSkgJiYgJHByb3BlcnRpZXNbJ1BBRERJTkctUklHSFQnXSA9PT0gJ2F1dG8nCgkJCQkJJiYgaXNzZXQoJGN1cnJibGtbJ2RpcmVjdGlvbiddKSAmJiAkY3VycmJsa1snZGlyZWN0aW9uJ10gPT09ICdydGwnKSB7CgkJCQkJJGN1cnJibGtbJ3BhZGRpbmdfcmlnaHQnXSA9ICR0aGlzLT5zaXplQ29udmVydGVyLT5jb252ZXJ0KAoJCQkJCQkkdGhpcy0+bXBkZi0+bGlzdF9pbmRlbnRfZGVmYXVsdCwKCQkJCQkJJGN1cnJibGtbJ2lubmVyX3dpZHRoJ10sCgkJCQkJCSR0aGlzLT5tcGRmLT5Gb250U2l6ZSwKCQkJCQkJZmFsc2UKCQkJCQkpOwoJCQkJfSBlbHNlaWYgKGlzc2V0KCRwcm9wZXJ0aWVzWydQQURESU5HLUxFRlQnXSkgJiYgJHByb3BlcnRpZXNbJ1BBRERJTkctTEVGVCddID09PSAnYXV0bycpIHsKCQkJCQkkY3VycmJsa1sncGFkZGluZ19sZWZ0J10gPSAkdGhpcy0+c2l6ZUNvbnZlcnRlci0+Y29udmVydCgKCQkJCQkJJHRoaXMtPm1wZGYtPmxpc3RfaW5kZW50X2RlZmF1bHQsCgkJCQkJCSRjdXJyYmxrWydpbm5lcl93aWR0aCddLAoJCQkJCQkkdGhpcy0+bXBkZi0+Rm9udFNpemUsCgkJCQkJCWZhbHNlCgkJCQkJKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gbVBERiA2ICBMaXN0cwoJCWlmICgkdGFnID09PSAnTEknKSB7CgkJCWlmICgkdGhpcy0+bXBkZi0+bGlzdGx2bCA9PSAwKSB7IC8vIGluIGNhc2Ugb2YgbWFsZm9ybWVkIEhUTUwgY29kZS4gRXhhbXBsZTooLi4uKTwvcD48bGk+Q29udGVudDwvbGk+PHA+UGFyYWdyYXBoMTwvcD4oLi4uKQoJCQkJJHRoaXMtPm1wZGYtPmxpc3RsdmwrKzsgLy8gZmlyc3QgZGVwdGggbGV2ZWwKCQkJCSR0aGlzLT5tcGRmLT5saXN0Y291bnRlclskdGhpcy0+bXBkZi0+bGlzdGx2bF0gPSAwOwoJCQl9CgoJCQlpZiAoIWlzc2V0KCRhdHRyWydQQUdFQlJFQUtBVk9JRENIRUNLRUQnXSkgfHwgISRhdHRyWydQQUdFQlJFQUtBVk9JRENIRUNLRUQnXSkgewoJCQkJJHRoaXMtPm1wZGYtPmxpc3Rjb3VudGVyWyR0aGlzLT5tcGRmLT5saXN0bHZsXSsrOwoJCQl9CgoJCQkkdGhpcy0+bXBkZi0+bGlzdGl0ZW0gPSBbXTsKCgkJCS8vIExpc3RpdGVtLXR5cGUKCQkJJHRoaXMtPm1wZGYtPl9zZXRMaXN0TWFya2VyKCRjdXJyYmxrWydsaXN0X3N0eWxlX3R5cGUnXSwgJGN1cnJibGtbJ2xpc3Rfc3R5bGVfaW1hZ2UnXSwgJGN1cnJibGtbJ2xpc3Rfc3R5bGVfcG9zaXRpb24nXSk7CgkJfQoKCQkvLyBtUERGIDYgQmlkaXJlY3Rpb25hbCBmb3JtYXR0aW5nIGZvciBibG9jayBlbGVtZW50cwoJCSRiZGYgPSBmYWxzZTsKCQkkYmRmMiA9ICcnOwoJCSRwb3BkID0gJyc7CgoJCS8vIEdldCBjdXJyZW50IGRpcmVjdGlvbgoJCSRjdXJyZGlyID0gJ2x0cic7CgkJaWYgKGlzc2V0KCRjdXJyYmxrWydkaXJlY3Rpb24nXSkpIHsKCQkJJGN1cnJkaXIgPSAkY3VycmJsa1snZGlyZWN0aW9uJ107CgkJfQoJCWlmIChpc3NldCgkYXR0clsnRElSJ10pICYmICRhdHRyWydESVInXSAhPSAnJykgewoJCQkkY3VycmRpciA9IHN0cnRvbG93ZXIoJGF0dHJbJ0RJUiddKTsKCQl9CgkJaWYgKGlzc2V0KCRwcm9wZXJ0aWVzWydESVJFQ1RJT04nXSkpIHsKCQkJJGN1cnJkaXIgPSBzdHJ0b2xvd2VyKCRwcm9wZXJ0aWVzWydESVJFQ1RJT04nXSk7CgkJfQoKCQkvLyBtUERGIDYgYmlkaQoJCS8vIGNmLiBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXdyaXRpbmctbW9kZXMvI3VuaWNvZGUtYmlkaQoJCWlmIChpc3NldCgkcHJvcGVydGllcyBbJ1VOSUNPREUtQklESSddKQoJCQkmJiAoc3RydG9sb3dlcigkcHJvcGVydGllcyBbJ1VOSUNPREUtQklESSddKSA9PT0gJ2JpZGktb3ZlcnJpZGUnIHx8IHN0cnRvbG93ZXIoJHByb3BlcnRpZXMgWydVTklDT0RFLUJJREknXSkgPT09ICdpc29sYXRlLW92ZXJyaWRlJykpIHsKCQkJaWYgKCRjdXJyZGlyID09PSAncnRsJykgewoJCQkJJGJkZiA9IDB4MjAyRTsKCQkJCSRwb3BkID0gJ1JMT1BERic7CgkJCX0gLy8gVSsyMDJFIFJMTwoJCQllbHNlIHsKCQkJCSRiZGYgPSAweDIwMkQ7CgkJCQkkcG9wZCA9ICdMUk9QREYnOwoJCQl9IC8vIFUrMjAyRCBMUk8KCQl9IGVsc2VpZiAoaXNzZXQoJHByb3BlcnRpZXMgWydVTklDT0RFLUJJREknXSkgJiYgc3RydG9sb3dlcigkcHJvcGVydGllcyBbJ1VOSUNPREUtQklESSddKSA9PT0gJ3BsYWludGV4dCcpIHsKCQkJJGJkZiA9IDB4MjA2ODsKCQkJJHBvcGQgPSAnRlNJUERJJzsgLy8gVSsyMDY4IEZTSQoJCX0KCQlpZiAoJGJkZikgewoJCQlpZiAoJGJkZjIpIHsKCQkJCSRiZGYyID0gVXRmU3RyaW5nOjpjb2RlMnV0ZigkYmRmKTsKCQkJfQoJCQkkdGhpcy0+bXBkZi0+T1RMZGF0YSA9IFtdOwoJCQlpZiAoJHRoaXMtPm1wZGYtPnRhYmxlTGV2ZWwpIHsKCQkJCSR0aGlzLT5tcGRmLT5fc2F2ZUNlbGxUZXh0QnVmZmVyKFV0ZlN0cmluZzo6Y29kZTJ1dGYoJGJkZikgLiAkYmRmMik7CgkJCX0gZWxzZSB7CgkJCQkkdGhpcy0+bXBkZi0+X3NhdmVUZXh0QnVmZmVyKFV0ZlN0cmluZzo6Y29kZTJ1dGYoJGJkZikgLiAkYmRmMik7CgkJCX0KCQkJJHRoaXMtPm1wZGYtPmJpRGlyZWN0aW9uYWwgPSB0cnVlOwoJCQkkY3VycmJsa1snYmlkaWNvZGUnXSA9ICRwb3BkOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gY2xvc2UoJiRhaHRtbCwgJiRpaHRtbCkKCXsKCQkkdGFnID0gJHRoaXMtPmdldFRhZ05hbWUoKTsKCgkJLy8gbVBERiA2IGJpZGkKCQkvLyBCbG9jawoJCS8vIElmIHVuaWNvZGUtYmlkaSBzZXQsIGFueSBlbWJlZGRpbmcgbGV2ZWxzLCBpc29sYXRlcywgb3Igb3ZlcnJpZGVzIHN0YXJ0ZWQgYnkgdGhpcyBib3ggYXJlIGNsb3NlZAoJCWlmIChpc3NldCgkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydiaWRpY29kZSddKSkgewoJCQkkYmxvY2twb3N0ID0gJHRoaXMtPm1wZGYtPl9zZXRCaWRpQ29kZXMoJ2VuZCcsICR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ2JpZGljb2RlJ10pOwoJCQlpZiAoJGJsb2NrcG9zdCkgewoJCQkJJHRoaXMtPm1wZGYtPk9UTGRhdGEgPSBbXTsKCQkJCWlmICgkdGhpcy0+bXBkZi0+dGFibGVMZXZlbCkgewoJCQkJCSR0aGlzLT5tcGRmLT5fc2F2ZUNlbGxUZXh0QnVmZmVyKCRibG9ja3Bvc3QpOwoJCQkJfSBlbHNlIHsKCQkJCQkkdGhpcy0+bXBkZi0+X3NhdmVUZXh0QnVmZmVyKCRibG9ja3Bvc3QpOwoJCQkJfQoJCQl9CgkJfQoKCQkkdGhpcy0+bXBkZi0+aWdub3JlZm9sbG93aW5nc3BhY2VzID0gdHJ1ZTsgLy9FbGltaW5hdGUgZXhjZWVkaW5nIGxlZnQtc2lkZSBzcGFjZXMKCQkkdGhpcy0+bXBkZi0+YmxvY2tqdXN0ZmluaXNoZWQgPSB0cnVlOwoKCQkkdGhpcy0+bXBkZi0+bGFzdGJsb2NrYm90dG9tbWFyZ2luID0gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnbWFyZ2luX2JvdHRvbSddOwoJCS8vIG1QREYgNiAgTGlzdHMKCQlpZiAoJHRhZyA9PT0gJ1VMJyB8fCAkdGFnID09PSAnT0wnKSB7CgkJCWlmICgkdGhpcy0+bXBkZi0+bGlzdGx2bCA+IDAgJiYgJHRoaXMtPm1wZGYtPnRhYmxlTGV2ZWwpIHsKCQkJCWlmIChpc3NldCgkdGhpcy0+bXBkZi0+bGlzdHR5cGVbJHRoaXMtPm1wZGYtPmxpc3RsdmxdKSkgewoJCQkJCXVuc2V0KCR0aGlzLT5tcGRmLT5saXN0dHlwZVskdGhpcy0+bXBkZi0+bGlzdGx2bF0pOwoJCQkJfQoJCQl9CgkJCSR0aGlzLT5tcGRmLT5saXN0bHZsLS07CgkJCSR0aGlzLT5tcGRmLT5saXN0aXRlbSA9IFtdOwoJCX0KCQlpZiAoJHRhZyA9PT0gJ0xJJykgewoJCQkkdGhpcy0+bXBkZi0+bGlzdGl0ZW0gPSBbXTsKCQl9CgoJCWlmIChwcmVnX21hdGNoKCcvXkhcZC8nLCAkdGFnKSAmJiAhJHRoaXMtPm1wZGYtPnRhYmxlTGV2ZWwgJiYgISR0aGlzLT5tcGRmLT53cml0aW5nVG9DKSB7CgkJCWlmIChpc3NldCgkdGhpcy0+bXBkZi0+aDJ0b2NbJHRhZ10pIHx8IGlzc2V0KCR0aGlzLT5tcGRmLT5oMmJvb2ttYXJrc1skdGFnXSkpIHsKCQkJCSRjb250ZW50ID0gJyc7CgkJCQlpZiAoY291bnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIpID09IDEpIHsKCQkJCQkkY29udGVudCA9ICR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyWzBdWzBdOwoJCQkJfSBlbHNlIHsKCQkJCQlmb3IgKCRpID0gMDsgJGkgPCBjb3VudCgkdGhpcy0+bXBkZi0+dGV4dGJ1ZmZlcik7ICRpKyspIHsKCQkJCQkJaWYgKDAgIT09IHN0cnBvcygkdGhpcy0+bXBkZi0+dGV4dGJ1ZmZlclskaV1bMF0sICJceGJiXHhhNFx4YWMiKSkgeyAvL2lubGluZSBvYmplY3QKCQkJCQkJCSRjb250ZW50IC49ICR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyWyRpXVswXTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCS8qIC0tIFRPQyAtLSAqLwoJCQkJaWYgKGlzc2V0KCR0aGlzLT5tcGRmLT5oMnRvY1skdGFnXSkpIHsKCQkJCQkkb2JqYXR0ciA9IFtdOwoJCQkJCSRvYmphdHRyWyd0eXBlJ10gPSAndG9jJzsKCQkJCQkkb2JqYXR0clsndG9jbGV2ZWwnXSA9ICR0aGlzLT5tcGRmLT5oMnRvY1skdGFnXTsKCQkJCQkkb2JqYXR0clsnQ09OVEVOVCddID0gaHRtbHNwZWNpYWxjaGFycygkY29udGVudCk7CgkJCQkJJGUgPSAiXHhiYlx4YTRceGFjdHlwZT10b2Msb2JqYXR0cj0iIC4gc2VyaWFsaXplKCRvYmphdHRyKSAuICJceGJiXHhhNFx4YWMiOwoJCQkJCWFycmF5X3Vuc2hpZnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIsIFskZV0pOwoJCQkJfQoJCQkJLyogLS0gRU5EIFRPQyAtLSAqLwoJCQkJLyogLS0gQk9PS01BUktTIC0tICovCgkJCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmgyYm9va21hcmtzWyR0YWddKSkgewoJCQkJCSRvYmphdHRyID0gW107CgkJCQkJJG9iamF0dHJbJ3R5cGUnXSA9ICdib29rbWFyayc7CgkJCQkJJG9iamF0dHJbJ2JrbGV2ZWwnXSA9ICR0aGlzLT5tcGRmLT5oMmJvb2ttYXJrc1skdGFnXTsKCQkJCQkkb2JqYXR0clsnQ09OVEVOVCddID0gJGNvbnRlbnQ7CgkJCQkJJGUgPSAiXHhiYlx4YTRceGFjdHlwZT10b2Msb2JqYXR0cj0iIC4gc2VyaWFsaXplKCRvYmphdHRyKSAuICJceGJiXHhhNFx4YWMiOwoJCQkJCWFycmF5X3Vuc2hpZnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIsIFskZV0pOwoJCQkJfQoJCQkJLyogLS0gRU5EIEJPT0tNQVJLUyAtLSAqLwoJCQl9CgkJfQoKCQkvKiAtLSBUQUJMRVMgLS0gKi8KCQlpZiAoJHRoaXMtPm1wZGYtPnRhYmxlTGV2ZWwpIHsKCQkJaWYgKCR0aGlzLT5tcGRmLT5saW5lYnJlYWtqdXN0ZmluaXNoZWQpIHsKCQkJCSR0aGlzLT5tcGRmLT5ibG9ja2p1c3RmaW5pc2hlZCA9IGZhbHNlOwoJCQl9CgkJCWlmIChpc3NldCgkdGhpcy0+bXBkZi0+SW5saW5lUHJvcGVydGllc1snQkxPQ0tJTlRBQkxFJ10pKSB7CgkJCQlpZiAoJHRoaXMtPm1wZGYtPklubGluZVByb3BlcnRpZXNbJ0JMT0NLSU5UQUJMRSddKSB7CgkJCQkJJHRoaXMtPm1wZGYtPnJlc3RvcmVJbmxpbmVQcm9wZXJ0aWVzKCR0aGlzLT5tcGRmLT5JbmxpbmVQcm9wZXJ0aWVzWydCTE9DS0lOVEFCTEUnXSk7CgkJCQl9CgkJCQl1bnNldCgkdGhpcy0+bXBkZi0+SW5saW5lUHJvcGVydGllc1snQkxPQ0tJTlRBQkxFJ10pOwoJCQl9CgkJCWlmICgkdGFnID09PSAnUFJFJykgewoJCQkJJHRoaXMtPm1wZGYtPmlzcHJlID0gZmFsc2U7CgkJCX0KCQkJcmV0dXJuOwoJCX0KCQkvKiAtLSBFTkQgVEFCTEVTIC0tICovCgkJJHRoaXMtPm1wZGYtPmxhc3RvcHRpb25hbHRhZyA9ICcnOwoJCSR0aGlzLT5tcGRmLT5kaXZiZWdpbiA9IGZhbHNlOwoKCQkkdGhpcy0+bXBkZi0+bGluZWJyZWFranVzdGZpbmlzaGVkID0gZmFsc2U7CgoJCSR0aGlzLT5tcGRmLT54ID0gJHRoaXMtPm1wZGYtPmxNYXJnaW4gKyAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydvdXRlcl9sZWZ0X21hcmdpbiddOwoKCQkvKiAtLSBDU1MtRkxPQVQgLS0gKi8KCQkvLyBJZiBmbG9hdCBjb250YWluZWQgaW4gYSBmbG9hdCwgbmVlZCB0byBleHRlbmQgYm90dG9tIHRvIGFsbG93IGZvciBpdAoJCSRjdXJycG9zID0gJHRoaXMtPm1wZGYtPnBhZ2UgKiAxMDAwICsgJHRoaXMtPm1wZGYtPnk7CgkJaWYgKGlzc2V0KCR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ2Zsb2F0X2VuZHBvcyddKSAmJiAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydmbG9hdF9lbmRwb3MnXSA+ICRjdXJycG9zKSB7CgkJCSRvbGRfcGFnZSA9ICR0aGlzLT5tcGRmLT5wYWdlOwoJCQkkbmV3X3BhZ2UgPSAoaW50KSAoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZmxvYXRfZW5kcG9zJ10gLyAxMDAwKTsKCQkJaWYgKCRvbGRfcGFnZSAhPSAkbmV3X3BhZ2UpIHsKCQkJCSRzID0gJHRoaXMtPm1wZGYtPlByaW50UGFnZUJhY2tncm91bmRzKCk7CgkJCQkvLyBXcml0ZXMgYWZ0ZXIgdGhlIG1hcmtlciBzbyBub3Qgb3ZlcndyaXR0ZW4gbGF0ZXIgYnkgcGFnZSBiYWNrZ3JvdW5kIGV0Yy4KCQkJCSR0aGlzLT5tcGRmLT5wYWdlc1skdGhpcy0+bXBkZi0+cGFnZV0gPSBwcmVnX3JlcGxhY2UoCgkJCQkJJy8oX19fQkFDS0dST1VORF9fX1BBVFRFUk5TJyAuICR0aGlzLT5tcGRmLT51bmlxc3RyIC4gJykvJywKCQkJCQknXFwxJyAuICJcbiIgLiAkcyAuICJcbiIsCgkJCQkJJHRoaXMtPm1wZGYtPnBhZ2VzWyR0aGlzLT5tcGRmLT5wYWdlXQoJCQkJKTsKCQkJCSR0aGlzLT5tcGRmLT5wYWdlQmFja2dyb3VuZHMgPSBbXTsKCQkJCSR0aGlzLT5tcGRmLT5wYWdlID0gJG5ld19wYWdlOwoJCQkJJHRoaXMtPm1wZGYtPlJlc2V0TWFyZ2lucygpOwoJCQkJJHRoaXMtPm1wZGYtPlJlc2V0KCk7CgkJCQkkdGhpcy0+bXBkZi0+cGFnZW91dHB1dFskdGhpcy0+bXBkZi0+cGFnZV0gPSBbXTsKCQkJfQoJCQkvLyBtb2QgY2hhbmdlcyBvcGVyYW5kcyB0byBpbnRlZ2VycyBiZWZvcmUgcHJvY2Vzc2luZwoJCQkkdGhpcy0+bXBkZi0+eSA9IChyb3VuZCgkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydmbG9hdF9lbmRwb3MnXSAqIDEwMDApICUgMTAwMDAwMCkgLyAxMDAwOwoJCX0KCQkvKiAtLSBFTkQgQ1NTLUZMT0FUIC0tICovCgoKCQkvL1ByaW50IGNvbnRlbnQKCQkkYmxvY2tzdGF0ZSA9IDA7CgkJaWYgKCR0aGlzLT5tcGRmLT5sYXN0YmxvY2tsZXZlbGNoYW5nZSA9PSAxKSB7CgkJCSRibG9ja3N0YXRlID0gMzsKCQl9IC8vIFRvcCAmIGJvdHRvbSBtYXJnaW5zL3BhZGRpbmcKCQllbHNlaWYgKCR0aGlzLT5tcGRmLT5sYXN0YmxvY2tsZXZlbGNoYW5nZSA9PSAtMSkgewoJCQkkYmxvY2tzdGF0ZSA9IDI7CgkJfSAvLyBCb3R0b20gbWFyZ2lucy9wYWRkaW5nIG9ubHkKCgkJLy8gY2FsbGVkIGZyb20gYWZ0ZXIgZS5nLiA8L3RhYmxlPiA8L2Rpdj4gPC9kaXY+IC4uLiAgICBPdXRwdXRzIGJsb2NrIG1hcmdpbi9ib3JkZXIgYW5kIHBhZGRpbmcKCQlpZiAoY291bnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIpICYmICR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyW2NvdW50KCR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyKSAtIDFdKSB7CgkJCWlmICgwICE9PSBzdHJwb3MoJHRoaXMtPm1wZGYtPnRleHRidWZmZXJbY291bnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIpIC0gMV1bMF0sICJceGJiXHhhNFx4YWMiKSkgeyAvLyBub3Qgc3BlY2lhbCBjb250ZW50CgkJCQkvLyBSaWdodCB0cmltIGxhc3QgY29udGVudCBhbmQgYWRqdXN0IE9UTGRhdGEKCQkJCWlmIChwcmVnX21hdGNoKCcvWyBdKyQvJywgJHRoaXMtPm1wZGYtPnRleHRidWZmZXJbY291bnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIpIC0gMV1bMF0sICRtKSkgewoJCQkJCSRzdHJpcCA9IHN0cmxlbigkbVswXSk7CgkJCQkJJHRoaXMtPm1wZGYtPnRleHRidWZmZXJbY291bnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIpIC0gMV1bMF0gPSBzdWJzdHIoCgkJCQkJCSR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyW2NvdW50KCR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyKSAtIDFdWzBdLAoJCQkJCQkwLAoJCQkJCQlzdHJsZW4oJHRoaXMtPm1wZGYtPnRleHRidWZmZXJbY291bnQoJHRoaXMtPm1wZGYtPnRleHRidWZmZXIpIC0gMV1bMF0pIC0gJHN0cmlwCgkJCQkJKTsKCQkJCQkvKiAtLSBPVEwgLS0gKi8KCQkJCQlpZiAoIWVtcHR5KCR0aGlzLT5tcGRmLT5DdXJyZW50Rm9udFsndXNlT1RMJ10pKSB7CgkJCQkJCSR0aGlzLT5vdGwtPnRyaW1PVExkYXRhKCR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyW2NvdW50KCR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyKSAtIDFdWzE4XSwgZmFsc2UpOyAvLyBtUERGIDYgIFpaWjk5SwoJCQkJCX0KCQkJCQkvKiAtLSBFTkQgT1RMIC0tICovCgkJCQl9CgkJCX0KCQl9CgoJCWlmIChjb3VudCgkdGhpcy0+bXBkZi0+dGV4dGJ1ZmZlcikgPT0gMCAmJiAkdGhpcy0+bXBkZi0+bGFzdGJsb2NrbGV2ZWxjaGFuZ2UgIT0gMCkgewoJCQkvKiR0aGlzLT5tcGRmLT5uZXdGbG93aW5nQmxvY2soCgkJCQkkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWyd3aWR0aCddLAoJCQkJJHRoaXMtPm1wZGYtPmxpbmVoZWlnaHQsCgkJCQknJywKCQkJCWZhbHNlLAoJCQkJMiwKCQkJCXRydWUsCgkJCQkoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZGlyZWN0aW9uJ10pID8gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZGlyZWN0aW9uJ10gOiAnbHRyJykKCQkJKTsqLwoKCQkJJHRoaXMtPm1wZGYtPm5ld0Zsb3dpbmdCbG9jaygKCQkJCSR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ3dpZHRoJ10sCgkJCQkkdGhpcy0+bXBkZi0+bGluZWhlaWdodCwKCQkJCScnLAoJCQkJZmFsc2UsCgkJCQkkYmxvY2tzdGF0ZSwKCQkJCXRydWUsCgkJCQkoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZGlyZWN0aW9uJ10pID8gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZGlyZWN0aW9uJ10gOiAnbHRyJykKCQkJKTsKCgkJCSR0aGlzLT5tcGRmLT5maW5pc2hGbG93aW5nQmxvY2sodHJ1ZSk7IC8vIHRydWUgPSBFTkQgb2YgZmxvd2luZyBibG9jawoJCQkkdGhpcy0+bXBkZi0+UGFpbnREaXZCQignJywgJGJsb2Nrc3RhdGUpOwoJCX0gZWxzZSB7CgkJCSR0aGlzLT5tcGRmLT5wcmludGJ1ZmZlcigkdGhpcy0+bXBkZi0+dGV4dGJ1ZmZlciwgJGJsb2Nrc3RhdGUpOwoJCX0KCgoJCSR0aGlzLT5tcGRmLT50ZXh0YnVmZmVyID0gW107CgoJCWlmICgkdGhpcy0+bXBkZi0+a3d0KSB7CgkJCSR0aGlzLT5tcGRmLT5rd3RfaGVpZ2h0ID0gJHRoaXMtPm1wZGYtPnkgLSAkdGhpcy0+bXBkZi0+a3d0X3kwOwoJCX0KCgkJLyogLS0gQ1NTLUlNQUdFLUZMT0FUIC0tICovCgkJJHRoaXMtPm1wZGYtPnByaW50ZmxvYXRidWZmZXIoKTsKCQkvKiAtLSBFTkQgQ1NTLUlNQUdFLUZMT0FUIC0tICovCgoJCWlmICgkdGFnID09PSAnUFJFJykgewoJCQkkdGhpcy0+bXBkZi0+aXNwcmUgPSBmYWxzZTsKCQl9CgoJCS8qIC0tIENTUy1GTE9BVCAtLSAqLwoJCWlmICgkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydmbG9hdCddID09PSAnUicpIHsKCQkJLy8gSWYgd2lkdGggbm90IHNldCwgaGVyZSB3b3VsZCBuZWVkIHRvIGFkanVzdCBhbmQgb3V0cHV0IGJ1ZmZlcgoJCQkkcyA9ICR0aGlzLT5tcGRmLT5QcmludFBhZ2VCYWNrZ3JvdW5kcygpOwoJCQkvLyBXcml0ZXMgYWZ0ZXIgdGhlIG1hcmtlciBzbyBub3Qgb3ZlcndyaXR0ZW4gbGF0ZXIgYnkgcGFnZSBiYWNrZ3JvdW5kIGV0Yy4KCQkJJHRoaXMtPm1wZGYtPnBhZ2VzWyR0aGlzLT5tcGRmLT5wYWdlXSA9IHByZWdfcmVwbGFjZSgnLyhfX19CQUNLR1JPVU5EX19fUEFUVEVSTlMnIC4gJHRoaXMtPm1wZGYtPnVuaXFzdHIgLiAnKS8nLCAnXFwxJyAuICJcbiIgLiAkcyAuICJcbiIsICR0aGlzLT5tcGRmLT5wYWdlc1skdGhpcy0+bXBkZi0+cGFnZV0pOwoJCQkkdGhpcy0+bXBkZi0+cGFnZUJhY2tncm91bmRzID0gW107CgkJCSR0aGlzLT5tcGRmLT5SZXNldCgpOwoJCQkkdGhpcy0+bXBkZi0+cGFnZW91dHB1dFskdGhpcy0+bXBkZi0+cGFnZV0gPSBbXTsKCgkJCWZvciAoJGkgPSAoJHRoaXMtPm1wZGYtPmJsa2x2bCAtIDEpOyAkaSA+PSAwOyAkaS0tKSB7CgkJCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skaV1bJ2Zsb2F0X2VuZHBvcyddKSkgewoJCQkJCSR0aGlzLT5tcGRmLT5ibGtbJGldWydmbG9hdF9lbmRwb3MnXSA9IG1heCgkdGhpcy0+bXBkZi0+YmxrWyRpXVsnZmxvYXRfZW5kcG9zJ10sICR0aGlzLT5tcGRmLT5wYWdlICogMTAwMCArICR0aGlzLT5tcGRmLT55KTsKCQkJCX0gZWxzZSB7CgkJCQkJJHRoaXMtPm1wZGYtPmJsa1skaV1bJ2Zsb2F0X2VuZHBvcyddID0gJHRoaXMtPm1wZGYtPnBhZ2UgKiAxMDAwICsgJHRoaXMtPm1wZGYtPnk7CgkJCQl9CgkJCX0KCgkJCSR0aGlzLT5tcGRmLT5mbG9hdERpdnNbXSA9IFsKCQkJCSdzaWRlJyA9PiAnUicsCgkJCQknc3RhcnRwYWdlJyA9PiAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydzdGFydHBhZ2UnXSwKCQkJCSd5MCcgPT4gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZmxvYXRfc3RhcnRfeSddLAoJCQkJJ3N0YXJ0cG9zJyA9PiAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydzdGFydHBhZ2UnXSAqIDEwMDAgKyAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydmbG9hdF9zdGFydF95J10sCgkJCQknZW5kcGFnZScgPT4gJHRoaXMtPm1wZGYtPnBhZ2UsCgkJCQkneTEnID0+ICR0aGlzLT5tcGRmLT55LAoJCQkJJ2VuZHBvcycgPT4gJHRoaXMtPm1wZGYtPnBhZ2UgKiAxMDAwICsgJHRoaXMtPm1wZGYtPnksCgkJCQkndycgPT4gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZmxvYXRfd2lkdGgnXSwKCQkJCSdibGtsdmwnID0+ICR0aGlzLT5tcGRmLT5ibGtsdmwsCgkJCQknYmxvY2tDb250ZXh0JyA9PiAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmwgLSAxXVsnYmxvY2tDb250ZXh0J10KCQkJXTsKCgkJCSR0aGlzLT5tcGRmLT55ID0gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZmxvYXRfc3RhcnRfeSddOwoJCQkkdGhpcy0+bXBkZi0+cGFnZSA9ICR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ3N0YXJ0cGFnZSddOwoJCQkkdGhpcy0+bXBkZi0+UmVzZXRNYXJnaW5zKCk7CgkJCSR0aGlzLT5tcGRmLT5wYWdlb3V0cHV0WyR0aGlzLT5tcGRmLT5wYWdlXSA9IFtdOwoJCX0KCQlpZiAoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZmxvYXQnXSA9PT0gJ0wnKSB7CgkJCS8vIElmIHdpZHRoIG5vdCBzZXQsIGhlcmUgd291bGQgbmVlZCB0byBhZGp1c3QgYW5kIG91dHB1dCBidWZmZXIKCQkJJHMgPSAkdGhpcy0+bXBkZi0+UHJpbnRQYWdlQmFja2dyb3VuZHMoKTsKCQkJLy8gV3JpdGVzIGFmdGVyIHRoZSBtYXJrZXIgc28gbm90IG92ZXJ3cml0dGVuIGxhdGVyIGJ5IHBhZ2UgYmFja2dyb3VuZCBldGMuCgkJCSR0aGlzLT5tcGRmLT5wYWdlc1skdGhpcy0+bXBkZi0+cGFnZV0gPSBwcmVnX3JlcGxhY2UoJy8oX19fQkFDS0dST1VORF9fX1BBVFRFUk5TJyAuICR0aGlzLT5tcGRmLT51bmlxc3RyIC4gJykvJywgJ1xcMScgLiAiXG4iIC4gJHMgLiAiXG4iLCAkdGhpcy0+bXBkZi0+cGFnZXNbJHRoaXMtPm1wZGYtPnBhZ2VdKTsKCQkJJHRoaXMtPm1wZGYtPnBhZ2VCYWNrZ3JvdW5kcyA9IFtdOwoJCQkkdGhpcy0+bXBkZi0+UmVzZXQoKTsKCQkJJHRoaXMtPm1wZGYtPnBhZ2VvdXRwdXRbJHRoaXMtPm1wZGYtPnBhZ2VdID0gW107CgoJCQlmb3IgKCRpID0gKCR0aGlzLT5tcGRmLT5ibGtsdmwgLSAxKTsgJGkgPj0gMDsgJGktLSkgewoJCQkJaWYgKGlzc2V0KCR0aGlzLT5tcGRmLT5ibGtbJGldWydmbG9hdF9lbmRwb3MnXSkpIHsKCQkJCQkkdGhpcy0+bXBkZi0+YmxrWyRpXVsnZmxvYXRfZW5kcG9zJ10gPSBtYXgoJHRoaXMtPm1wZGYtPmJsa1skaV1bJ2Zsb2F0X2VuZHBvcyddLCAkdGhpcy0+bXBkZi0+cGFnZSAqIDEwMDAgKyAkdGhpcy0+bXBkZi0+eSk7CgkJCQl9IGVsc2UgewoJCQkJCSR0aGlzLT5tcGRmLT5ibGtbJGldWydmbG9hdF9lbmRwb3MnXSA9ICR0aGlzLT5tcGRmLT5wYWdlICogMTAwMCArICR0aGlzLT5tcGRmLT55OwoJCQkJfQoJCQl9CgoJCQkkdGhpcy0+bXBkZi0+ZmxvYXREaXZzW10gPSBbCgkJCQknc2lkZScgPT4gJ0wnLAoJCQkJJ3N0YXJ0cGFnZScgPT4gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnc3RhcnRwYWdlJ10sCgkJCQkneTAnID0+ICR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ2Zsb2F0X3N0YXJ0X3knXSwKCQkJCSdzdGFydHBvcycgPT4gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnc3RhcnRwYWdlJ10gKiAxMDAwICsgJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnZmxvYXRfc3RhcnRfeSddLAoJCQkJJ2VuZHBhZ2UnID0+ICR0aGlzLT5tcGRmLT5wYWdlLAoJCQkJJ3kxJyA9PiAkdGhpcy0+bXBkZi0+eSwKCQkJCSdlbmRwb3MnID0+ICR0aGlzLT5tcGRmLT5wYWdlICogMTAwMCArICR0aGlzLT5tcGRmLT55LAoJCQkJJ3cnID0+ICR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ2Zsb2F0X3dpZHRoJ10sCgkJCQknYmxrbHZsJyA9PiAkdGhpcy0+bXBkZi0+YmxrbHZsLAoJCQkJJ2Jsb2NrQ29udGV4dCcgPT4gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsIC0gMV1bJ2Jsb2NrQ29udGV4dCddCgkJCV07CgoJCQkkdGhpcy0+bXBkZi0+eSA9ICR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ2Zsb2F0X3N0YXJ0X3knXTsKCQkJJHRoaXMtPm1wZGYtPnBhZ2UgPSAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydzdGFydHBhZ2UnXTsKCQkJJHRoaXMtPm1wZGYtPlJlc2V0TWFyZ2lucygpOwoJCQkkdGhpcy0+bXBkZi0+cGFnZW91dHB1dFskdGhpcy0+bXBkZi0+cGFnZV0gPSBbXTsKCQl9CgkJLyogLS0gRU5EIENTUy1GTE9BVCAtLSAqLwoKCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsndmlzaWJpbGl0eSddKSAmJiAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWyd2aXNpYmlsaXR5J10gIT09ICd2aXNpYmxlJykgewoJCQkkdGhpcy0+bXBkZi0+U2V0VmlzaWJpbGl0eSgndmlzaWJsZScpOwoJCX0KCgkJJHBhZ2VfYnJlYWtfYWZ0ZXIgPSAnJzsKCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsncGFnZV9icmVha19hZnRlciddKSkgewoJCQkkcGFnZV9icmVha19hZnRlciA9ICR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ3BhZ2VfYnJlYWtfYWZ0ZXInXTsKCQl9CgoJCS8vIFJlc2V0IHZhbHVlcwoJCSR0aGlzLT5tcGRmLT5SZXNldCgpOwoKCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnei1pbmRleCddKSAmJiAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWyd6LWluZGV4J10gPiAwKSB7CgkJCSR0aGlzLT5tcGRmLT5FbmRMYXllcigpOwoJCX0KCgkJLy8gbVBERiA2IHBhZ2UtYnJlYWstaW5zaWRlOmF2b2lkCgkJaWYgKCR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ2tlZXBfYmxvY2tfdG9nZXRoZXInXSkgewoJCQkkbW92ZXBhZ2UgPSBmYWxzZTsKCQkJLy8gSWYgcGFnZS1icmVhay1pbnNpZGU6YXZvaWQgc2VjdGlvbiBoYXMgYnJva2VuIHRvIG5ldyBwYWdlIGJ1dCBmaXRzIG9uIG9uZSBzaWRlIC0gdGhlbiBtb3ZlOgoJCQlpZiAoKCR0aGlzLT5tcGRmLT5wYWdlIC0gJHRoaXMtPm1wZGYtPmt0X3AwMCkgPT0gMSAmJiAkdGhpcy0+bXBkZi0+eSA8ICR0aGlzLT5tcGRmLT5rdF95MDApIHsKCQkJCSRtb3ZlcGFnZSA9IHRydWU7CgkJCX0KCQkJaWYgKCgkdGhpcy0+bXBkZi0+cGFnZSAtICR0aGlzLT5tcGRmLT5rdF9wMDApID4gMCkgewoJCQkJZm9yICgkaSA9ICR0aGlzLT5tcGRmLT5wYWdlOyAkaSA+ICR0aGlzLT5tcGRmLT5rdF9wMDA7ICRpLS0pIHsKCQkJCQl1bnNldCgkdGhpcy0+bXBkZi0+cGFnZXNbJGldKTsKCQkJCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnYmJfcGFpbnRlZCddWyRpXSkpIHsKCQkJCQkJdW5zZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnYmJfcGFpbnRlZCddWyRpXSk7CgkJCQkJfQoJCQkJCWlmIChpc3NldCgkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydtYXJnaW5Db3JyZWN0ZWQnXVskaV0pKSB7CgkJCQkJCXVuc2V0KCR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ21hcmdpbkNvcnJlY3RlZCddWyRpXSk7CgkJCQkJfQoJCQkJCWlmIChpc3NldCgkdGhpcy0+bXBkZi0+cGFnZW91dHB1dFskaV0pKSB7CgkJCQkJCXVuc2V0KCR0aGlzLT5tcGRmLT5wYWdlb3V0cHV0WyRpXSk7CgkJCQkJfQoJCQkJfQoJCQkJJHRoaXMtPm1wZGYtPnBhZ2UgPSAkdGhpcy0+bXBkZi0+a3RfcDAwOwoJCQl9CgkJCSR0aGlzLT5tcGRmLT5rZWVwX2Jsb2NrX3RvZ2V0aGVyID0gMDsKCQkJJHRoaXMtPm1wZGYtPnBhZ2VvdXRwdXRbJHRoaXMtPm1wZGYtPnBhZ2VdID0gW107CgoJCQkkdGhpcy0+bXBkZi0+eSA9ICR0aGlzLT5tcGRmLT5rdF95MDA7CgoJCQkkaWh0bWwgPSAkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdWydhcnJheV9pJ10gLSAxOwoKCQkJJGFodG1sWyRpaHRtbCArIDFdIC49ICcgcGFnZWJyZWFrYXZvaWRjaGVja2VkPSJ0cnVlIjsnOyAvLyBhdm9pZCByZS1pdGVyYXRpbmc7IHJlYWQgaW4gT3BlblRhZygpCgoJCQl1bnNldCgkdGhpcy0+bXBkZi0+YmxrWyR0aGlzLT5tcGRmLT5ibGtsdmxdKTsKCQkJJHRoaXMtPm1wZGYtPmJsa2x2bC0tOwoKCQkJZm9yICgkYmxrbHZsID0gMTsgJGJsa2x2bCA8PSAkdGhpcy0+bXBkZi0+YmxrbHZsOyAkYmxrbHZsKyspIHsKCQkJCSR0aGlzLT5tcGRmLT5ibGtbJGJsa2x2bF1bJ3kwJ10gPSAkdGhpcy0+bXBkZi0+YmxrWyRibGtsdmxdWydpbml0aWFsX3kwJ107CgkJCQkkdGhpcy0+bXBkZi0+YmxrWyRibGtsdmxdWyd4MCddID0gJHRoaXMtPm1wZGYtPmJsa1skYmxrbHZsXVsnaW5pdGlhbF94MCddOwoJCQkJJHRoaXMtPm1wZGYtPmJsa1skYmxrbHZsXVsnc3RhcnRwYWdlJ10gPSAkdGhpcy0+bXBkZi0+YmxrWyRibGtsdmxdWydpbml0aWFsX3N0YXJ0cGFnZSddOwoJCQl9CgoJCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsneDAnXSkpIHsKCQkJCSR0aGlzLT5tcGRmLT54ID0gJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsneDAnXTsKCQkJfSBlbHNlIHsKCQkJCSR0aGlzLT5tcGRmLT54ID0gJHRoaXMtPm1wZGYtPmxNYXJnaW47CgkJCX0KCgkJCSR0aGlzLT5tcGRmLT5sYXN0YmxvY2tsZXZlbGNoYW5nZSA9IDA7CgkJCSR0aGlzLT5tcGRmLT5SZXNldE1hcmdpbnMoKTsKCQkJaWYgKCRtb3ZlcGFnZSkgewoJCQkJJHRoaXMtPm1wZGYtPkFkZFBhZ2UoKTsKCQkJfQoJCQlyZXR1cm47CgkJfQoKCQlpZiAoJHRoaXMtPm1wZGYtPmJsa2x2bCA+IDApIHsgLy8gPT0wIFNIT1VMRE4nVCBIQVBQRU4gLSBOT1QgWEhUTUwKCQkJaWYgKCR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ3RhZyddID09ICR0YWcpIHsKCQkJCXVuc2V0KCR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF0pOwoJCQkJJHRoaXMtPm1wZGYtPmJsa2x2bC0tOwoJCQl9CgkJCS8vZWxzZSB7IGVjaG8gJHRhZzsgZXhpdDsgfQkvLyBkZWJ1ZyAtIGZvcmNlcyBlcnJvciBpZiBpbmNvcnJlY3RseSBuZXN0ZWQgaHRtbCB0YWdzCgkJfQoKCQkkdGhpcy0+bXBkZi0+bGFzdGJsb2NrbGV2ZWxjaGFuZ2UgPSAtMTsKCQkvLyBSZXNldCBJbmxpbmUtdHlwZSBwcm9wZXJ0aWVzCgkJaWYgKGlzc2V0KCR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ0lubGluZVByb3BlcnRpZXMnXSkpIHsKCQkJJHRoaXMtPm1wZGYtPnJlc3RvcmVJbmxpbmVQcm9wZXJ0aWVzKCR0aGlzLT5tcGRmLT5ibGtbJHRoaXMtPm1wZGYtPmJsa2x2bF1bJ0lubGluZVByb3BlcnRpZXMnXSk7CgkJfQoKCQkkdGhpcy0+bXBkZi0+eCA9ICR0aGlzLT5tcGRmLT5sTWFyZ2luICsgJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnb3V0ZXJfbGVmdF9tYXJnaW4nXTsKCgkJaWYgKCEkdGhpcy0+bXBkZi0+dGFibGVMZXZlbCAmJiAkcGFnZV9icmVha19hZnRlcikgewoJCQkkc2F2ZV9ibGtsdmwgPSAkdGhpcy0+bXBkZi0+YmxrbHZsOwoJCQkkc2F2ZV9ibGsgPSAkdGhpcy0+bXBkZi0+YmxrOwoJCQkkc2F2ZV9zaWxwID0gJHRoaXMtPm1wZGYtPnNhdmVJbmxpbmVQcm9wZXJ0aWVzKCk7CgkJCSRzYXZlX2lscCA9ICR0aGlzLT5tcGRmLT5JbmxpbmVQcm9wZXJ0aWVzOwoJCQkkc2F2ZV9iZmxwID0gJHRoaXMtPm1wZGYtPklubGluZUJERjsKCQkJJHNhdmVfYmZscGMgPSAkdGhpcy0+bXBkZi0+SW5saW5lQkRGY3RyOyAvLyBtUERGIDYKCQkJLy8gbVBERiA2IHBhZ2VicmVha3R5cGUKCQkJJHN0YXJ0cGFnZSA9ICR0aGlzLT5tcGRmLT5wYWdlOwoJCQkkcGFnZWJyZWFrdHlwZSA9ICR0aGlzLT5tcGRmLT5kZWZhdWx0UGFnZWJyZWFrVHlwZTsKCQkJaWYgKCR0aGlzLT5tcGRmLT5Db2xBY3RpdmUpIHsKCQkJCSRwYWdlYnJlYWt0eXBlID0gJ2Nsb25lYWxsJzsKCQkJfQoKCQkJLy8gbVBERiA2IHBhZ2VicmVha3R5cGUKCQkJJHRoaXMtPm1wZGYtPl9wcmVGb3JjZWRQYWdlYnJlYWsoJHBhZ2VicmVha3R5cGUpOwoKCQkJaWYgKCRwYWdlX2JyZWFrX2FmdGVyID09PSAnUklHSFQnKSB7CgkJCQkkdGhpcy0+bXBkZi0+QWRkUGFnZSgkdGhpcy0+bXBkZi0+Q3VyT3JpZW50YXRpb24sICdORVhULU9ERCcpOwoJCQl9IGVsc2VpZiAoJHBhZ2VfYnJlYWtfYWZ0ZXIgPT09ICdMRUZUJykgewoJCQkJJHRoaXMtPm1wZGYtPkFkZFBhZ2UoJHRoaXMtPm1wZGYtPkN1ck9yaWVudGF0aW9uLCAnTkVYVC1FVkVOJyk7CgkJCX0gZWxzZSB7CgkJCQkkdGhpcy0+bXBkZi0+QWRkUGFnZSgkdGhpcy0+bXBkZi0+Q3VyT3JpZW50YXRpb24pOwoJCQl9CgoJCQkvLyBtUERGIDYgcGFnZWJyZWFrdHlwZQoJCQkkdGhpcy0+bXBkZi0+X3Bvc3RGb3JjZWRQYWdlYnJlYWsoJHBhZ2VicmVha3R5cGUsICRzdGFydHBhZ2UsICRzYXZlX2JsaywgJHNhdmVfYmxrbHZsKTsKCgkJCSR0aGlzLT5tcGRmLT5JbmxpbmVQcm9wZXJ0aWVzID0gJHNhdmVfaWxwOwoJCQkkdGhpcy0+bXBkZi0+SW5saW5lQkRGID0gJHNhdmVfYmZscDsKCQkJJHRoaXMtPm1wZGYtPklubGluZUJERmN0ciA9ICRzYXZlX2JmbHBjOyAvLyBtUERGIDYKCQkJJHRoaXMtPm1wZGYtPnJlc3RvcmVJbmxpbmVQcm9wZXJ0aWVzKCRzYXZlX3NpbHApOwoJCX0KCQkvLyBtUERGIDYgYmlkaQoJCS8vIEJsb2NrCgkJLy8gSWYgdW5pY29kZS1iaWRpIHNldCwgYW55IGVtYmVkZGluZyBsZXZlbHMsIGlzb2xhdGVzLCBvciBvdmVycmlkZXMgcmVvcGVuZWQgaW4gdGhlIGNvbnRpbnVpbmcgYmxvY2sKCQlpZiAoaXNzZXQoJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnYmlkaWNvZGUnXSkpIHsKCQkJJGJsb2NrcHJlID0gJHRoaXMtPm1wZGYtPl9zZXRCaWRpQ29kZXMoJ3N0YXJ0JywgJHRoaXMtPm1wZGYtPmJsa1skdGhpcy0+bXBkZi0+YmxrbHZsXVsnYmlkaWNvZGUnXSk7CgkJCWlmICgkYmxvY2twcmUpIHsKCQkJCSR0aGlzLT5tcGRmLT5PVExkYXRhID0gW107CgkJCQlpZiAoJHRoaXMtPm1wZGYtPnRhYmxlTGV2ZWwpIHsKCQkJCQkkdGhpcy0+bXBkZi0+X3NhdmVDZWxsVGV4dEJ1ZmZlcigkYmxvY2twcmUpOwoJCQkJfSBlbHNlIHsKCQkJCQkkdGhpcy0+bXBkZi0+X3NhdmVUZXh0QnVmZmVyKCRibG9ja3ByZSk7CgkJCQl9CgkJCX0KCQl9Cgl9Cgp9CiI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjE6e3M6OToiXE1wZGZcVGFnIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6OToiXE1wZGZcVGFnIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6MzoiVGFnIjt9fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjE6e3M6MTg6IlxNcGRmXFRhZ1xCbG9ja1RhZyI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18iOjEzOntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czoxODoiXE1wZGZcVGFnXEJsb2NrVGFnIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6ODoiQmxvY2tUYWciO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZG9jQmxvY2siO047czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGFic3RyYWN0IjtiOjE7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGZpbmFsIjtiOjA7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHBhcmVudCI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjEzOiJcTXBkZlxUYWdcVGFnIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6MzoiVGFnIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGltcGxlbWVudHMiO2E6MDp7fXM6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBjb25zdGFudHMiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBwcm9wZXJ0aWVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AbWV0aG9kcyI7YToyOntzOjI2OiJcTXBkZlxUYWdcQmxvY2tUYWc6Om9wZW4oKSI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QiOjEyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZG9jQmxvY2siO047czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6MjY6IlxNcGRmXFRhZ1xCbG9ja1RhZzo6b3BlbigpIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6NDoib3BlbiI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhYnN0cmFjdCI7YjowO3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABmaW5hbCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABzdGF0aWMiO2I6MDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAdmlzaWJpbGl0eSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5IjoxOntzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5AHZpc2liaWxpdHkiO3M6NjoicHVibGljIjt9czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGFyZ3VtZW50cyI7YTozOntpOjA7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudCI6NTp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAbmFtZSI7czo0OiJhdHRyIjtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudAB0eXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcTWl4ZWRfIjowOnt9czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAZGVmYXVsdCI7TjtzOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABieVJlZmVyZW5jZSI7YjowO3M6NDk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGlzVmFyaWFkaWMiO2I6MDt9aToxO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQiOjU6e3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AG5hbWUiO3M6NToiYWh0bWwiO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AHR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABkZWZhdWx0IjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGJ5UmVmZXJlbmNlIjtiOjE7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAaXNWYXJpYWRpYyI7YjowO31pOjI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudCI6NTp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAbmFtZSI7czo1OiJpaHRtbCI7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAdHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE1peGVkXyI6MDp7fXM6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGRlZmF1bHQiO047czo1MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAYnlSZWZlcmVuY2UiO2I6MTtzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABpc1ZhcmlhZGljIjtiOjA7fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjEzO3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjA7fXM6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6OTQ5O3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjA7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZAByZXR1cm5UeXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcTWl4ZWRfIjowOnt9czo1NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGhhc1JldHVybkJ5UmVmZXJlbmNlIjtiOjA7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAG1ldGFkYXRhIjthOjA6e319czoyNzoiXE1wZGZcVGFnXEJsb2NrVGFnOjpjbG9zZSgpIjtPOjM1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZCI6MTI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TjtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czoyNzoiXE1wZGZcVGFnXEJsb2NrVGFnOjpjbG9zZSgpIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6NToiY2xvc2UiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYWJzdHJhY3QiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAc3RhdGljIjtiOjA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhcmd1bWVudHMiO2E6Mjp7aTowO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQiOjU6e3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AG5hbWUiO3M6NToiYWh0bWwiO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AHR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABkZWZhdWx0IjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGJ5UmVmZXJlbmNlIjtiOjE7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAaXNWYXJpYWRpYyI7YjowO31pOjE7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudCI6NTp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAbmFtZSI7czo1OiJpaHRtbCI7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAdHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE1peGVkXyI6MDp7fXM6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGRlZmF1bHQiO047czo1MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAYnlSZWZlcmVuY2UiO2I6MTtzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABpc1ZhcmlhZGljIjtiOjA7fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjk1MTtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZW5kTG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjEzNTA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHJldHVyblR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAaGFzUmV0dXJuQnlSZWZlcmVuY2UiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbWV0YWRhdGEiO2E6MDp7fX19czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHVzZWRUcmFpdHMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBsb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MTA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGVuZExvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToxMzUyO3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjA7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBtZXRhZGF0YSI7YTowOnt9fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";